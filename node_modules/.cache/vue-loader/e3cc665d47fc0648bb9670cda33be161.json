{"remainingRequest":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\components\\common\\Datepick.vue?vue&type=style&index=0&id=1b257d33&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\components\\common\\Datepick.vue","mtime":1574651315622},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\css-loader\\index.js","mtime":1572955184356},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1572955240132},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\postcss-loader\\src\\index.js","mtime":1572955222169},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\sass-loader\\lib\\loader.js","mtime":1572955229063},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572955172692},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":1572955240129}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  .mask {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 999;\n    background: rgba(0,0,0,.2);\n  }\n\n  .picker {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\theight: 270px;\n    // z-index: 10000;\n    background: #fff;\n  }\n\n  .picker-panel {\n    position: relative;\n    // height: 226px;\n\theight: 125px;//186\n    padding: 12px 12px;\n    box-sizing: border-box;\n\n    .picker-mask-top, .picker-mask-bottom {\n      position: absolute;\n      left: 0;\n      right: 0;\n      height: 34px;//72\n      background: #fff;\n      transform: translateZ(0);\n      z-index: 1;\n      pointer-events: none;\n    }\n\n    .picker-mask-top {\n      top: 12px;\n      background: linear-gradient(to bottom, rgba(255,255,255,.9), rgba(255,255,255,.5));\n      &:after {\n        content: '';\n        display: block;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        border-bottom: 1px solid #ebebeb;\n        transform: scaleY(.5);\n      }\n    }\n\n    .picker-mask-bottom {\n      bottom: 12px;\n      background: linear-gradient(to top, rgba(255,255,255,.9), rgba(255,255,255,.5));\n      &:before {\n        content: '';\n        display: block;\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: 0;\n        border-bottom: 1px solid #ebebeb;\n        transform: scaleY(.5);\n      }\n    }\n  }\n\n  .picker-wheel-wrapper {\n    display: flex;\n    align-items: stretch;\n    height: 100%;\n\n    .picker-wheel {\n      flex: 1;\n      overflow: hidden;\n    }\n\n    .wheel-scroll {\n      margin-top: 34px;//72 -52\n\n      .wheel-item {\n        height: 34px;\n        line-height: 34px;\n        font-size: 17px;\n        text-align: center;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        color: #333;\n      }\n    }\n  }\n",{"version":3,"sources":["Datepick.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Datepick.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- <v-btn block outlined @click=\"show\" class=\"ma-0\">{{dateStr}}</v-btn> -->\r\n\t\t<span @click=\"show\" style=\"font-size: 14px;\">\r\n\t\t\t{{dateStr}}\r\n\t\t\t<slot name=\"tail\"></slot> \r\n\t\t\t<v-icon v-if=\"showIcon\" right>mdi-chevron-down</v-icon>\r\n\t\t</span>\r\n\t\t <v-bottom-sheet v-model=\"display\">\r\n\r\n\t\t      <v-sheet class=\"text-center\" height=\"200px\">\r\n\t\t\t\t<div class=\"picker\">\r\n\t\t\t\t\t<p class=\"d-flex justify-space-between align-baseline py-4 px-2\">\r\n\t\t\t\t\t\t<v-btn text color=\"blue-grey\" class=\"my-0\" @click=\"cancelSelect\">取消</v-btn>\r\n\t\t\t\t\t\t<span class=\"subtitle-2\">请选择日期时间</span>\r\n\t\t\t\t\t\t<v-btn text color=\"green\" class=\"my-0\" @click=\"selectOk\">确定</v-btn>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<v-row class=\"py-0 pa-6\">\r\n\t\t\t\t\t\t<v-col v-for=\"(wheel, i) in pickerData\" :key=\"i\" class=\"py-0\">\r\n\t\t\t\t\t\t\t{{text[i]}}\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<div class=\"picker-panel\">\r\n\t\t\t\t\t\t<div class=\"picker-mask-top\"></div>\r\n\t\t\t\t\t\t<div class=\"picker-mask-bottom\"></div>\r\n\t\t\t\t\t\t<div class=\"picker-wheel-wrapper\" ref=\"wheelWrapper\">\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div class=\"picker-wheel\" v-for=\"(wheel, index) in pickerData\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<div class=\"wheel-scroll\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex flex-column wheel-item\" v-for=\"(item, idx) in wheel\" :key=\"idx\">\r\n\t\t\t\t\t\t\t\t\t\t{{item}}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t      </v-sheet>\r\n\t\t    </v-bottom-sheet>\r\n\t\t  </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t  getMonthDay,\r\n\t  dateTimePicker,\r\n\t  transPickerValue\r\n\t} from '@/plugins/newDate.js'\r\n\timport upSvg from '@/img/up.svg'\r\n\timport BScroll from 'better-scroll'\r\n\timport { scrollMixins } from '@/mixins/scroll.js'\r\n\timport {\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\texport default {\r\n\t\tmixins:[scrollMixins],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdateStr:'',\r\n\t\t\t\t\r\n\t\t\t\tfirstTime:'2019-01-11',\r\n\t\t\t\t\r\n\t\t\t\ttext:['年','月','日'],\r\n\t\t\t\t\r\n\t\t\t\tdateTime:[0,0,0],\r\n\t\t\t\t\r\n\t\t\t\twheels: [],\r\n\t\t\t\t\r\n\t\t\t\tdisplay:false,\r\n\r\n\t\t\t\tpickerData: [],\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcomputed:{\r\n\t\t  dateTimeArray(){\r\n\t\t    return dateTimePicker().dateTimeArray;\r\n\t\t  }\r\n\t\t},\r\n\t\t\r\n\t\tmounted() {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t\t\r\n\t\tprops:{\r\n\t\t\tvalue:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\tshowIcon:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\twatch:{\r\n\t\t\tvalue:{\r\n\t\t\t\thandler(nV,oV){\r\n\t\t\t\t\tthis.firstTime = nV; \r\n\t\t\t\t\tthis.init();\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t\tdisplay(nV){\r\n\t\t\t\t!nV&&this.scrollToOrigin();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\tinit(){//初始化\r\n\t\t\t\tthis.dateTime = transPickerValue(this.firstTime);\r\n\t\t\t\t\r\n\t\t\t\tthis.pickerData  = this.dateTimeArray;\r\n\t\t\t\t\r\n\t\t\t\tlet brr = [];\r\n\t\t\t\t\r\n\t\t\t\tthis.dateTime.forEach((item,i) =>{\r\n\t\t\t\t\tbrr.push(this.pickerData[i][this.dateTime[i]]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.dateStr = `${brr[0]}-${brr[1]}-${brr[2]}`;\r\n\t\t\t},\r\n\r\n\t\t\tcancelSelect(){//取消选择\r\n\t\t\t\tthis.display = false;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tscrollToOrigin(){//滚动位置回到原点\r\n\t\t\t\tthis.beforeClose();\r\n\t\t\t\t\r\n\t\t\t\tthis.dateTime.forEach((item,i) =>{\r\n\t\t\t\t\tthis.wheels[i].wheelTo(item);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tselectOk(){//确定选择\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\t\r\n\t\t\t\tthis.wheels.forEach((wheel, i) => {\r\n\t\t\t\t  arr.push(wheel.getSelectedIndex());//bs自带的方法 获取元素下标\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.dateTime = arr;\r\n\t\t\t\t\r\n\t\t\t\tlet brr = [];\r\n\t\t\t\t\r\n\t\t\t\tarr.forEach((item,i) =>{\r\n\t\t\t\t\tbrr.push(this.pickerData[i][arr[i]]);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tlet str = `${brr[0]}-${brr[1]}-${brr[2]}`;\r\n\t\t\t\t\r\n\t\t\t\tthis.dateStr = str;\r\n\t\t\t\t\r\n\t\t\t\tthis.$emit('changeTime',str);\r\n\r\n\t\t\t\tthis.display = false;\r\n\t\t\t},\r\n\r\n\t\t\tshow(){ //显示选择器\r\n\r\n\t\t\t\tthis.display = true;\r\n\t\t\t\t\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t  const wheelWrapper = this.$refs.wheelWrapper\r\n\t\t\t\t  this.pickerData.forEach((item, index) => {\r\n\t\t\t\t\tthis.createWheel(wheelWrapper, index).enable()\r\n\t\t\t\t  });\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.afterOpen();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t_getCurrentValue () {\r\n\t\t\t  const value = []\r\n\t\t\t  this.wheels.forEach((wheel, i) => {\r\n\t\t\t    const j = wheel.getSelectedIndex();//bs自带的方法 获取元素下标\r\n\t\t\t    value.push({\r\n\t\t\t      index: j,\r\n\t\t\t      value: this.pickerData[i][j]\r\n\t\t\t    })\r\n\t\t\t  });\r\n\t\t\t  return value\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcreateWheel (wheelWrapper, i) { //创建bs的wheel配置\r\n\t\t\t  if (!this.wheels[i]) {\r\n\t\t\t    const wheel = this.wheels[i] = new BScroll(wheelWrapper.children[i], {\r\n\t\t\t      wheel: {\r\n\t\t\t        selectedIndex: this.dateTime[i],\r\n\t\t\t        rotate: 25\r\n\t\t\t      },\r\n\t\t\t      swipeTime: 1500\r\n\t\t\t    })\r\n\t\t\t    wheel.on('scrollEnd', () => {\r\n\t\t\t      const newIndex = this._getCurrentValue()[i].index;\r\n\t\t\t\t  const newValue = this._getCurrentValue()[i].value;\r\n\t\t\t    });\r\n\r\n\t\t\t\t\r\n\t\t\t  } else {\r\n\t\t\t    this.wheels[i].refresh()\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t\t  return this.wheels[i]\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .mask {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: 999;\r\n    background: rgba(0,0,0,.2);\r\n  }\r\n\r\n  .picker {\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n\theight: 270px;\r\n    // z-index: 10000;\r\n    background: #fff;\r\n  }\r\n\r\n  .picker-panel {\r\n    position: relative;\r\n    // height: 226px;\r\n\theight: 125px;//186\r\n    padding: 12px 12px;\r\n    box-sizing: border-box;\r\n\r\n    .picker-mask-top, .picker-mask-bottom {\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      height: 34px;//72\r\n      background: #fff;\r\n      transform: translateZ(0);\r\n      z-index: 1;\r\n      pointer-events: none;\r\n    }\r\n\r\n    .picker-mask-top {\r\n      top: 12px;\r\n      background: linear-gradient(to bottom, rgba(255,255,255,.9), rgba(255,255,255,.5));\r\n      &:after {\r\n        content: '';\r\n        display: block;\r\n        position: absolute;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        border-bottom: 1px solid #ebebeb;\r\n        transform: scaleY(.5);\r\n      }\r\n    }\r\n\r\n    .picker-mask-bottom {\r\n      bottom: 12px;\r\n      background: linear-gradient(to top, rgba(255,255,255,.9), rgba(255,255,255,.5));\r\n      &:before {\r\n        content: '';\r\n        display: block;\r\n        position: absolute;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        border-bottom: 1px solid #ebebeb;\r\n        transform: scaleY(.5);\r\n      }\r\n    }\r\n  }\r\n\r\n  .picker-wheel-wrapper {\r\n    display: flex;\r\n    align-items: stretch;\r\n    height: 100%;\r\n\r\n    .picker-wheel {\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .wheel-scroll {\r\n      margin-top: 34px;//72 -52\r\n\r\n      .wheel-item {\r\n        height: 34px;\r\n        line-height: 34px;\r\n        font-size: 17px;\r\n        text-align: center;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        color: #333;\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}