{"remainingRequest":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\lhds\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\work\\lhds\\src\\views\\Login.vue","mtime":1573809817115},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapActions\n} from 'vuex';\nimport img from '@/img/logo.png'\nimport bgImg from '@/img/body.svg'\nimport showIcon from '@/img/show.svg'\nimport hideIcon from '@/img/hide.svg'\nexport default {\n\n\tdata() { //数据\n\t\treturn {\n\t\t\terrorText: {},\n\t\t\tsnackbar: false,\n\t\t\tcode: '',\n\t\t\tdialog: false, //对话框\n\t\t\tlogo: img,\n\t\t\tshow_icon: showIcon,\n\t\t\thide_icon: hideIcon,\n\t\t\tbg: bgImg,\n\t\t\ttype: 1, //1登陆2忘记3注册\n\t\t\tregisterValid: true,\n\t\t\tloginValid: true,\n\t\t\tshow1: false,\n\t\t\tname: '',\n\t\t\tpassword: '',\n\t\t\temail: '',\n\t\t\tnameRules: [\n\t\t\t\tv => !!v || '必填',\n\t\t\t\tv => (v && v.length >= 2) || '名称至少两个字',\n\t\t\t],\n\t\t\trules: {\n\t\t\t\trequired: value => !!value || '必填.',\n\t\t\t\tmin: v => v.length >= 6 || '最少六个字符',\n\t\t\t\temail: value => {\n\t\t\t\t\tconst pattern =\n\t\t\t\t\t\t/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\t\t\treturn pattern.test(value) || '请输入正确的邮箱.'\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t},\n\n\tcomponents: { //模板\n\n\t},\n\n\tmethods: { //方法\n\t\t...mapActions(['changeLay', 'changeSnack']),\n\n\t\tlogin() { //登陆\n\t\t\tif (this.$refs.loginForm.validate()) {\n\n\t\t\t\tthis.changeLay(true);\n\n\t\t\t\tlet list = {\n\t\t\t\t\taccount: this.name,\n\t\t\t\t\tpassword: this.password\n\t\t\t\t};\n\n\t\t\t\t$ax.getAjaxData('/EasWebUser/login', list, (res) => {\n\n\t\t\t\t\tthis.changeLay(false);\n\n\t\t\t\t\tif (res.code == 1) {\n\t\t\t\t\t\tsessionStorage.token = res.token;\n\t\t\t\t\t\tif (res.accState == 0) { //已过期\n\n\t\t\t\t\t\t\tthis.dialog = true;\n\n\t\t\t\t\t\t} else { //未过期\n\t\t\t\t\t\t\tlet msg = {\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\terrorText: {\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: '登陆成功'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.changeSnack(msg);\n\n\t\t\t\t\t\t\tlet userData = {\n\t\t\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\t\t\temail: res.email,\n\t\t\t\t\t\t\t\tendTime: res.endTime\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsessionStorage.showBar = true;\n\t\t\t\t\t\t\tthis.$store.state.showBar = true;\n\t\t\t\t\t\t\tsessionStorage.userData = JSON.stringify(userData);\n\n\t\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\t\tpath: '/dashboard'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tregister() { //注册\n\t\t\tif (this.$refs.registForm.validate()) {\n\t\t\t\tlet list = {\n\t\t\t\t\taccount: this.name,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\temail: this.email\n\t\t\t\t}\n\t\t\t\tthis.changeLay(true);\n\t\t\t\t$ax.getAjaxData('/EasWebUser/register', list, (res) => {\n\n\t\t\t\t\tif (res.code == 1) {\n\t\t\t\t\t\tthis.changeLay(false);\n\t\t\t\t\t\tlet msg = {\n\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\terrorText: {\n\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\ttext: '注册成功'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.changeSnack(msg);\n\t\t\t\t\t\tsessionStorage.userName = this.name;\n\t\t\t\t\t\tthis.type = 1;\n\t\t\t\t\t\tthis.name = '';\n\t\t\t\t\t\tthis.password = '';\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.changeLay(false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\n\t\ttoJH() { //激活\n\t\t\tlet list = {\n\t\t\t\t// account:sessionStorage.userName,\n\t\t\t\tcode: this.code\n\t\t\t}\n\t\t\tthis.changeLay(true);\n\t\t\t$ax.getAjaxData('/EasWebUser/recharge', list, (res) => {\n\n\t\t\t\tthis.changeLay(false);\n\n\t\t\t\tif (res.code == 1) {\n\t\t\t\t\tthis.dialog = false;\n\n\t\t\t\t\tthis.login();\n\n\t\t\t\t}\n\n\t\t\t}, {\n\t\t\t\thasToken: true\n\t\t\t});\n\n\t\t}\n\t},\n\n\t//-----------生命周期--------------------------------------\n\n\tcreated() { //应用程序加载前触发。多个页面会调用多次\n\n\t},\n\n\tmounted() { //页面渲染完成后触发\n\n\t}\n\n\n}\n",null]}