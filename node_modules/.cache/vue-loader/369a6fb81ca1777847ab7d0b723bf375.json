{"remainingRequest":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\lhds\\src\\components\\common\\Addrule.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\work\\lhds\\src\\components\\common\\Addrule.vue","mtime":1573440126071},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapActions\n} from 'vuex';\nimport Utils from '@/plugins/cryAes.js'\nimport { addRuleData } from '@/mixins/addRuleData.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t\n\t\t}\n\t},\n\tmixins:[addRuleData],\n\t\n\tprops: {\n\t\truleObj: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({})\n\t\t},\n\t\tedit: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\t\n\twatch: {\n\t\tedit: {\n\t\t\thandler: 'transPropsData',\n\t\t\timmediate: true\n\t\t},\n\t\twssData: {\n\t\t\thandler(nV, oV) {\n\t\t\t\tthis.getMessage();\n\t\t\t},\n\t\t\tdeep: true\n\t\t}\n\t},\n\n\tcomputed: {\n\t\twssData() { //wss传递的消息\n\t\t\treturn this.$store.state.collocationList;\n\t\t}\n\t},\n\t\n\tmethods:{\n\t\t...mapActions(['changeLay', 'changeSnack']),\n\t\t\n\t\tgetMessage() { //wss传递的消息\n\t\t\tlet result = this.wssData;\n\t\t\tswitch (result.code) {\n\t\t\t\tcase 20013: //客户端在线\n\t\t\t\t\tthis.wssSave();\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\n\t\t},\n\t\t\t\t\n\t\twssSave() {\n\t\t\tlet json = JSON.stringify({\n\t\t\t\tcode: 1006\n\t\t\t});\n\t\t\t\t\n\t\t\tthis.$sock.websocketsend(json);\n\t\t},\n\t\t\n\t\tpostRule() { //提交规则\n\t\t\t\n\t\t\tlet list = JSON.parse(JSON.stringify(this.jData));\n\t\t\tlist.R54 = this.curcy;\n\t\t\tlet title = this.ruleName.replace(/\\s+/g,'');\n\t\t\tlist.R0 = this.charToUnicode(title);\n\t\t\tlist.R11 = list.R11 ? 1 : 0;\n\t\t\tlist.R13 = list.R13 ? 1 : 0;\n\t\t\tlist.R19 = list.R19 ? 1 : 0;\n\t\t\tlist.R16 = list.R16 ? 1 : 0;\n\t\t\tlist.R20 = list.R20 ? 1 : 0;\n\t\t\tlist.R21 = list.R21 ? 1 : 0;\n\t\t\tlist.R26 = list.R26 ? 1 : 0;\n\t\t\tlist.R31 = list.R31 ? 1 : 0;\n\t\t\t\t\n\t\t\tfor (let i in list) { //数字转成了字符\n\t\t\t\tif (typeof(list[i]) == 'number') {\n\t\t\t\t\tlist[i] = list[i].toString();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\tlet obj = {\n\t\t\t\tname: title,\n\t\t\t\tdata: Utils.encrypt(JSON.stringify(list))\n\t\t\t};\n\t\t\t\n\t\t\tthis.edit ? obj.id = list.id : '';\n\t\t\t\t\n\t\t\tlet url = this.edit ? '/EasWebUser/changeRule' : '/EasWebUser/addRule';\n\t\t\t\t\n\t\t\t$ax.getAjaxData(url, obj, (res) => {\n\t\t\t\tthis.changeLay(false);\n\t\t\t\tif (res.code == 1) {\n\t\t\t\t\tlet msg = {\n\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\terrorText: {\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttext: this.edit ? '编辑成功' : '添加成功'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.changeSnack(msg);\n\t\t\t\t\n\t\t\t\t\tlet state = this.$sock.lookState();\n\t\t\t\t\n\t\t\t\t\tstate == -1 ? this.$sock.initWebSocket() : this.wssSave();\n\t\t\t\t\n\t\t\t\t\tsessionStorage.removeItem('collocation'); //清空缓存里的rule/api\n\t\t\t\t\n\t\t\t\t\tObject.assign(this.$data, this.$options.data());\n\t\t\t\t\n\t\t\t\t\tthis.hideRule();\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\thasToken: true\n\t\t\t});\n\t\t\t\t\n\t\t}\n\t}\n}\n",null]}