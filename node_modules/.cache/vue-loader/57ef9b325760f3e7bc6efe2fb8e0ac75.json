{"remainingRequest":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\lhds\\src\\views\\Dem.1.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\work\\lhds\\src\\views\\Dem.1.vue","mtime":1571144344000},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport settingDialog from '@/components/settingDialog.vue'\nimport addRule from '@/components/addRule.vue'\nimport upSvg from '@/img/up.svg'\nexport default {\n\tinject: ['theme'],\n\t\n\tcompoments: {\n\t\taddRule,\n\t\tsettingDialog\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttips:'暂无数据',\n\t\t\t\n\t\t\tshowSetDialog:false,//显示设置对话框\n\t\t\t\n\t\t\ttransition: 'scale-transition',\n\t\t\t\n\t\t\tloading:true,//控制骨架屏 true表示显示\n\t\t\t\n\t\t\tcurrency: [//货币类型\n\t\t\t  { id: 1, value: 'USDT' },\n\t\t\t  { id: 2, value: 'ETH' },\n\t\t\t  { id: 3, value: 'BTC' },\n\t\t\t],\n\t\t\t\n\t\t\tnames2:[\n\t\t\t\t{\n\t\t\t\t\tid:1,\n\t\t\t\t\tname:'Sno'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:2,\n\t\t\t\t\tname:'Hon'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:3,\n\t\t\t\t\tname:'Don'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:4,\n\t\t\t\t\tname:'Elaine Street'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:5,\n\t\t\t\t\tname:'Court Street'\n\t\t\t\t},\n\t\t\t\t{\t\n\t\t\t\t\tid:6,\n\t\t\t\t\tname:'oub'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:7,\n\t\t\t\t\tname:'VA'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:8,\n\t\t\t\t\tname:'AJKJK V'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t],\n\t\t\t\n\t\t\tneighborhoods:[1,4],//已选择的\n\t\t\t\n\t\t\tsearch:'',\n\t\t\t\n\t\t\tvalid:true,//表格验证\n\t\t\t\n\t\t\tdatas:{},\n\t\t\t\n\t\t\tcondition:{//搜索条件\n\t\t\t\ttype:'',\n\t\t\t\taccount:'',\n\t\t\t\trule:''\n\t\t\t},\n\t\t\t\n\t\t\taddCollocation:false,//添加托管对话框\n\t\t\t\n\t\t\tcurrentRule: null,//当前规则\n\n\t\t\tshowAddRule: false,//修改规则对话框\n\n\t\t\tupIcon: upSvg,\n\n\t\t\ttarget: '#vRow',\n\t\t\toptions: {\n\t\t\t\tduration: 1000,\n\t\t\t\toffset: 0,\n\t\t\t\teasing: 'easeInOutCubic'\n\t\t\t},\n\t\t\t\n\t\t\truleData:[],\n\t\t\t\n\t\t\titems: []\n\t\t}\n\t},\n\n\tmethods: {\n\t\tcloseSetting(){\n\t\t\t\n\t\t\tthis.showSetDialog = false;\n\t\t\t\n\t\t},\n\t\t\n\t\tshowSetting(){//打开设置\n\t\t\tthis.showSetDialog = true;\n\t\t},\n\t\t\n\t\taddSelect(id){//选中一个交易对\n\t\t\tlet index = this.neighborhoods.indexOf(id);\n\t\t\tif(index>-1){\n\t\t\t\tthis.neighborhoods.splice(index,1);\n\t\t\t}else{\n\t\t\t\tthis.neighborhoods.push(id);\n\t\t\t}\n\t\t},\n\t\t\n\t\tcloseAddColl(){//添加托管对话框-关闭\n\t\t\tthis.addCollocation = false;\n\t\t\tthis.neighborhoods = [];\n\t\t\tthis.$refs.form.resetValidation();\n\t\t},\n\n\t\tdebounce(){//节流\n\t\t\tvar t;\n\t\t\tclearTimeout(this.t);\n\t\t\t\n\t\t\tthis.t = setTimeout(() => {\n\t\t\t\tlet that = this;\n\t\t\t\tif (!that.isEmpty(this.search)) {\n\n\t\t\t\t\tlet obj = this.fuzzyQuery(this.search);\n\n\t\t\t\t\tthis.ruleData = obj;\n\t\t\t\t}else{\n\n\t\t\t\t\tthis.ruleData = this.names2;\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t},\n\t\t\n\t\tfuzzyQuery(keyWord) {//模糊查询\n\t\t    var reg =  new RegExp(keyWord);\n\t\t    var arr = [];\n\t\t\tthis.names2.forEach(item =>{\n\t\t\t\tif (reg.test(item.name)) {\n\t\t\t\t\tarr.push(item);\n\t\t\t\t}\n\t\t\t})\n\t\t    return arr;\n\t\t},\n\t\t  \n\t\t  \n\t\tisEmpty(obj) {//判断字符是否为空的方法\n\t\t\tif (typeof obj == 'undefined' || obj == null || obj == '' || (obj.length > 0 && obj.trim().length == 0)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tcancelSearch(){//取消搜索\n\t\t\tthis.search = '';\n\t\t\tthis.ruleData = this.names2;\n\t\t},\n\t\t\n\t\ttransUpperCase(data) { //交易对转大写\n\t\t\treturn data.toUpperCase();\n\t\t},\n\t\t\n\t\tshowChip(item) { //显示操作面板\n\t\t\tthis.$set(item,'show',!item.show); //取反\n\t\t\tthis.currentRule = item;\n\t\t},\n\n\t\tonOperation(item){ //改变托管的状态-启动/暂停\n\t\t\tlet send = {\n\t\t\t\tdata:[{id:item.id}],\n\t\t\t\tcode:item.isRun==0?1004:1005\n\t\t\t};\n\t\t\t\n\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t},\n\n\t\tonPosition(item){ //平仓/建仓-单个\n\t\t\tlet send = {\n\t\t\t\tdata:[{id:item.id}],\n\t\t\t\tcode:item.isHas==0?1011:1012\n\t\t\t};\n\t\t\t\n\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t},\n\n\t\tonRemove(item){//删除单个托管\n\t\t\tlet send = {\n\t\t\t\tdata:[{id:item.id}],\n\t\t\t\tcode:1010\n\t\t\t};\n\t\t\t\n\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t},\n\n\t\tonEdit(item) { //编辑规则\n\t\t\t//用某id得到对应的规则 传递给组件\n\t\t\tthis.showAddRule = true;\n\t\t},\n\n\t\thideRule() { //隐藏规则输入框\n\t\t\tthis.showAddRule = false;\n\t\t},\n\t\t\n\t\tallEnd(){//全部停止\n\t\t\tthis.$Modal.confirm({\n\t\t\t\ttitle: '交易托管',\n\t\t\t\tcontent: '<p>是否全部停止?</p>',\n\t\t\t\tonOk: () => {\n\t\t\t\t\tlet json = JSON.stringify({code:1003});\n\t\t\t\t\tthis.websocketsend(json);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tallStart(){//全部启动\n\t\t\tthis.$Modal.confirm({\n\t\t\t\ttitle: '交易托管',\n\t\t\t\tcontent: '<p>是否全部启动?</p>',\n\t\t\t\tonOk: () => {\n\t\t\t\t\tlet code = JSON.stringify({code:1002});\n\t\t\t\t\tthis.websocketsend(code);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\taddTo(){//添加至托管\n\t\t\tif (this.$refs.form.validate()) {\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\t\n\n\t},\n\tdestroyed() {\n\t\tclearTimeout(this.t);\n\t},\n\tmounted() {\n\t\tthis.ruleData = this.names2;\n\t\t\n\t\tthis.$sock.initWebSocket();\n\n\t\tif(sessionStorage.apiPublic){\n\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t}else{\n\t\t\t$ax.getTestData('/EasWebUser/getAPIData',{},(res)=> {\n\t\t\t\tif(res.code == 1){\t\t\t\t\n\t\t\t\t\tsessionStorage.apiPublic = JSON.stringify(res.data);\n\t\t\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//请求数据\n\t\t\n\t\tthis.loading = false;\n\t\t\n\t\t\n\t},\n\tbeforeRouteLeave(to,from,next){//路由离开前断开\n\t\tthis.$sock.close();\n\t\tnext();\n\t}\n}\n",{"version":3,"sources":["Dem.1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6OA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"Dem.1.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<v-container fluid grid-list-xl flat>\n\t\t\n\t\t<v-flex class=\"d-flex flex-column\">\n\t\t\t<div class=\" px-5 py-2 my-0 green white--text d-flex justify-space-between align-center flex-wrap xy-border-circle\">\n\t\t\t\t<span style=\"font-size: 18px;\" v-once>托管列表</span>\n\t\t\t\t<span style=\"min-width: 260px;\">\n\t\t\t\t\t<v-btn small color=\"white\" outlined @click=\"showSetting\">设置</v-btn>\n\t\t\t\t\t<v-btn small color=\"white\" outlined @click=\"addCollocation=true\">添加托管</v-btn>\n\t\t\t\t\t<v-btn small color=\"white\" outlined @click=\"allStart\">全部启动</v-btn>\n\t\t\t\t\t<v-btn small color=\"white\" outlined @click=\"allEnd\">全部停止</v-btn>\t\n\t\t\t\t</span>\n\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t   <component :is=\"transition !== 'None' ? `v-${transition}` : 'div'\"  hide-on-leave>\n\t\t\t\t<v-skeleton-loader\n\t\t\t\tv-if=\"loading\"\n\t\t\t\ttype=\"article\"\n\t\t\t\t>\n\t\t\t\t</v-skeleton-loader>\n\t\t\t\t\n\t\t\t\t<div v-else>\n\t\t\t\t\t<v-list-item three-line style=\"border: 1px solid #ccc;text-align: center;\" v-if=\"items.length<1\">\n\t\t\t\t\t\t<p class=\"text-center\" style=\"width: 100%;\">{{tips}}</p>\n\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\n\t\t\t\t\t<div v-for=\"(item,index) in items\" :key=\"index\" v-else>\n\t\t\t\t\t\t<v-list-item three-line class=\"xy-tableItem\">\n\t\t\t\t\t\t\t<v-list-item-content class=\"align-self-start\">\n\t\t\t\t\t\t\t\t<v-list-item-title class=\" mb-2\">\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex align-center\">\n\t\t\t\t\t\t\t\t\t\t<span class=\" font-weight-bold\">{{transUpperCase(item.symbol)}} </span>\n\t\t\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\t\t:style=\"{color:item.isRun==0?'#E53935':item.isRun==1?'#43A047':item.isRun==2?'orange':'blue',fontSize:'14px'}\" \n\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-bold pl-2\">\n\t\t\t\t\t\t\t\t\t\t{{item.isRun==0?'待启动':item.isRun==1?'运行中':item.isRun==2?'建仓中':'平仓中'}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</v-list-item-title>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t<v-list-item-subtitle class=\"font-weight-regular\">{{item.exc}}</v-list-item-subtitle>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"font-weight-regular\">\n\t\t\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"24\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">参考价格</span>：{{item.referPrice}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"24\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span>最新价格</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.newPrice}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"24\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">涨跌幅</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.range=='-'?'-':item.range+' %'}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"24\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">持仓均价</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.holdPrice}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"24\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">持仓数量</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.holdAmount}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"12\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">利润百分比</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.profit=='-'?'-':item.profit+' %'}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"6\" :sm=\"12\" :xs=\"12\" class=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"textAlign\">补仓次数</span>\n\t\t\t\t\t\t\t\t\t\t：{{item.other}}\n\t\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<v-btn tile outlined small color=\"success\" class=\"ma-0\" @click.prevent.stop=\"showChip(item)\">\n\t\t\t\t\t\t\t\t\t\t操作\n\t\t\t\t\t\t\t\t\t\t<v-icon right>{{item.show?'mdi-menu-up':'mdi-menu-down'}}</v-icon>\n\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t<v-expand-transition v-if=\"item.show\">\n\t\t\t\t\t\t\t\t\t<v-chip-group active-class=\"green--text \"column class=\"font-weight-regular\">\n\t\t\t\t\t\t\t\t\t\t<v-chip  @click=\"onOperation(item)\">{{item.isRun==0?'启动':'停止'}}</v-chip>\n\t\t\t\t\t\t\t\t\t\t<v-chip  @click=\"onRemove(item)\" :disabled=\"item.isRun>=1\">删除</v-chip>\n\t\t\t\t\t\t\t\t\t\t<v-chip  @click=\"onEdit(item)\" :disabled=\"item.isRun>=1\">修改</v-chip>\n\t\t\t\t\t\t\t\t\t\t<v-chip  @click=\"onPosition(item)\" :disabled=\"item.isRun==0\">{{item.isBuy==0?'建仓':'平仓'}}</v-chip>\n\t\t\t\t\t\t\t\t\t</v-chip-group>\n\t\t\t\t\t\t\t\t</v-expand-transition>\n\t\t\t\t\t\n\t\t\t\t\t\t\t</v-list-item-content>\n\t\t\t\t\t\n\t\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t  \n\t\t\t</component>\n\n\t\t</v-flex>\n\t\t\n\t\t<v-dialog v-model=\"showAddRule\" fullscreen hide-overlay transition=\"dialog-bottom-transition\">\n\t\t\t<add-rule v-if=\"showAddRule\" @hideRule=\"hideRule\" :ruleObj=\"currentRule\" ref=\"AR\" :edit=\"true\" class=\"ma-0\"></add-rule>\n\t\t</v-dialog>\n\t\t\n\t\t<v-dialog v-model=\"addCollocation\" width=\"800\" persistent>\n\t\t\t<v-card>\n\t\t\t\t<v-card-title class=\"title grey lighten-2\" primary-title>\n\t\t\t\t\t添加托管\n\t\t\t\t</v-card-title>\n\t\t\n\t\t\t\t<v-card-text>\n\t\t\t\t\t\t<v-form\n\t\t\t\t\t\tref=\"form\"\n\t\t\t\t\t\tv-model=\"valid\"\n\t\t\t\t\t\tlazy-validation>\n\t\t\t\t\t\t\t<div class=\"d-flex flex-wrap\">\n\t\t\t\t\t\t\t\t<v-select\n\t\t\t\t\t\t\t\t\tv-model=\"condition.rule\"\n\t\t\t\t\t\t\t\t\t:rules=\"[v => !!v || '必填']\"\n\t\t\t\t\t\t\t\t\t:items=\"datas\"\n\t\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t\titem-color=\"green\"\n\t\t\t\t\t\t\t\t\titem-text=\"exc\"\n\t\t\t\t\t\t\t\t\titem-value=\"exc\"\n\t\t\t\t\t\t\t\t\tlabel=\"规则\"\n\t\t\t\t\t\t\t\t\tstyle=\"max-width: 250px;\"\n\t\t\t\t\t\t\t\t\tclass=\"pr-2\"\n\t\t\t\t\t\t\t\t\tsingle-line>\n\t\t\t\t\t\t\t\t\t<template v-slot:label>\n\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 14px;\">选择规则</span>\n\t\t\t\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\t\t </v-select>\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t <v-select\n\t\t\t\t\t\t\t\t \tv-model=\"condition.account\"\n\t\t\t\t\t\t\t\t \t:rules=\"[v => !!v || '必填']\"\n\t\t\t\t\t\t\t\t \t:items=\"datas\"\n\t\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t\titem-color=\"green\"\n\t\t\t\t\t\t\t\t \titem-text=\"exc\"\n\t\t\t\t\t\t\t\t \titem-value=\"exc\"\n\t\t\t\t\t\t\t\t \tlabel=\"账户\"\n\t\t\t\t\t\t\t\t\tstyle=\"max-width: 250px;\"\n\t\t\t\t\t\t\t\t\tclass=\"pr-2\"\n\t\t\t\t\t\t\t\t \tsingle-line>\n\t\t\t\t\t\t\t\t \t<template v-slot:label>\n\t\t\t\t\t\t\t\t \t\t<span style=\"font-size: 14px;\">选择账户</span>\n\t\t\t\t\t\t\t\t \t</template>\n\t\t\t\t\t\t\t\t  \n\t\t\t\t\t\t\t\t  </v-select>\n\n\t\t\t\t\t\t\t\t  <v-select\n\t\t\t\t\t\t\t\t  \tv-model=\"condition.type\"\n\t\t\t\t\t\t\t\t  \t:rules=\"[v => !!v || '必填']\"\n\t\t\t\t\t\t\t\t  \t:items=\"currency\"\n\t\t\t\t\t\t\t\t  \titem-text=\"value\"\n\t\t\t\t\t\t\t\t  \titem-value=\"id\"\n\t\t\t\t\t\t\t\t  \tlabel=\"法币\"\n\t\t\t\t\t\t\t\t\tcolor=\"green\"\n\t\t\t\t\t\t\t\t\titem-color=\"green\"\n\t\t\t\t\t\t\t\t\tstyle=\"max-width: 250px;\"\n\t\t\t\t\t\t\t\t\tclass=\"pr-2\"\n\t\t\t\t\t\t\t\t  \tsingle-line>\n\t\t\t\t\t\t\t\t  \t<template v-slot:label>\n\t\t\t\t\t\t\t\t  \t\t<span style=\"font-size: 14px;\">法币类型</span>\n\t\t\t\t\t\t\t\t  \t</template>\n\t\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t   </v-select>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</v-form>\n\t\t\t\t\t\t<v-card outlined>\n\t\t\t\t\t\t    <v-card-title style=\"max-width:250px\">\n\t\t\t\t\t\t\t\t  <v-text-field\n\t\t\t\t\t\t\t\t\t v-model=\"search\"\n\t\t\t\t\t\t\t\t\t :append-icon=\"search==''?'':'mdi-close'\"\n\t\t\t\t\t\t\t\t\t label=\"搜索\"\n\t\t\t\t\t\t\t\t\t color=\"green\"\n\t\t\t\t\t\t\t\t\t @click:append=\"cancelSearch\"\n\t\t\t\t\t\t\t\t\t @input=\"debounce\"\n\t\t\t\t\t\t\t\t\t single-line\n\t\t\t\t\t\t\t\t\t hide-details\n\t\t\t\t\t\t\t\t  ></v-text-field>\n\t\t\t\t\t\t    </v-card-title>\n\t\t\t\t\t\t    <v-card-text style=\"height: 250px;overflow-y: auto;\">\n\t\t\t\t\t\t\t\t<v-chip\n\t\t\t\t\t\t\t\t  class=\"ma-2\"\n\t\t\t\t\t\t\t\t  v-if=\"ruleData.length==0\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t  无结果\n\t\t\t\t\t\t\t\t</v-chip>\n\t\t\t\t\t\t\t\t<v-chip\n\t\t\t\t\t\t\t\t  class=\"ma-2\"\n\t\t\t\t\t\t\t\t  :color=\"neighborhoods.indexOf(item.id)>-1?'green':'grey'\"\n\t\t\t\t\t\t\t\t  text-color=\"white\"\n\t\t\t\t\t\t\t\t  v-for=\"(item,index) in ruleData\" :key=\"index\"\n\t\t\t\t\t\t\t\t  @click=\"addSelect(item.id)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t  <v-avatar left v-if=\"neighborhoods.indexOf(item.id)>-1\">\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-checkbox-marked-circle</v-icon>\n\t\t\t\t\t\t\t\t  </v-avatar>\n\t\t\t\t\t\t\t\t  {{item.name}}\n\t\t\t\t\t\t\t\t</v-chip>\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t</v-card-text>\n\t\t\t\t\t\t\t<v-card-text class=\"d-flex align-baseline justify-end \">\n\t\t\t\t\t\t\t\t<span class=\"font-weight-regular pr-2\">已选 {{neighborhoods.length}} 个</span>\n\t\t\t\t\t\t\t\t<v-btn color=\"green\" text v-if=\"neighborhoods.length>0\" @click=\"addTo\">添加至托管</v-btn>\n\t\t\t\t\t\t\t</v-card-text>\n\t\t\t\t\t\t  </v-card>\n\t\t\t\t\t \n\t\t\t\t</v-card-text>\n\t\t\n\t\t\t\t<v-card-actions>\n\t\t\t\t\t<div class=\"flex-grow-1\"></div>\n\t\t\t\t\t<v-btn color=\"primary\" text @click=\"closeAddColl\">\n\t\t\t\t\t\t关闭\n\t\t\t\t\t</v-btn>\n\t\t\t\t</v-card-actions>\n\t\t\t</v-card>\n\t\t</v-dialog>\n\t\t\n\t\t<setting-dialog v-if=\"showSetDialog\" :settingModal=\"showSetDialog\" @closeSetting=\"closeSetting\"></setting-dialog>\n\t\t\n\t</v-container>\n</template>\n\n<script>\n\timport settingDialog from '@/components/settingDialog.vue'\n\timport addRule from '@/components/addRule.vue'\n\timport upSvg from '@/img/up.svg'\n\texport default {\n\t\tinject: ['theme'],\n\t\t\n\t\tcompoments: {\n\t\t\taddRule,\n\t\t\tsettingDialog\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttips:'暂无数据',\n\t\t\t\t\n\t\t\t\tshowSetDialog:false,//显示设置对话框\n\t\t\t\t\n\t\t\t\ttransition: 'scale-transition',\n\t\t\t\t\n\t\t\t\tloading:true,//控制骨架屏 true表示显示\n\t\t\t\t\n\t\t\t\tcurrency: [//货币类型\n\t\t\t\t  { id: 1, value: 'USDT' },\n\t\t\t\t  { id: 2, value: 'ETH' },\n\t\t\t\t  { id: 3, value: 'BTC' },\n\t\t\t\t],\n\t\t\t\t\n\t\t\t\tnames2:[\n\t\t\t\t\t{\n\t\t\t\t\t\tid:1,\n\t\t\t\t\t\tname:'Sno'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:2,\n\t\t\t\t\t\tname:'Hon'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:3,\n\t\t\t\t\t\tname:'Don'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:4,\n\t\t\t\t\t\tname:'Elaine Street'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:5,\n\t\t\t\t\t\tname:'Court Street'\n\t\t\t\t\t},\n\t\t\t\t\t{\t\n\t\t\t\t\t\tid:6,\n\t\t\t\t\t\tname:'oub'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:7,\n\t\t\t\t\t\tname:'VA'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:8,\n\t\t\t\t\t\tname:'AJKJK V'\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t],\n\t\t\t\t\n\t\t\t\tneighborhoods:[1,4],//已选择的\n\t\t\t\t\n\t\t\t\tsearch:'',\n\t\t\t\t\n\t\t\t\tvalid:true,//表格验证\n\t\t\t\t\n\t\t\t\tdatas:{},\n\t\t\t\t\n\t\t\t\tcondition:{//搜索条件\n\t\t\t\t\ttype:'',\n\t\t\t\t\taccount:'',\n\t\t\t\t\trule:''\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\taddCollocation:false,//添加托管对话框\n\t\t\t\t\n\t\t\t\tcurrentRule: null,//当前规则\n\n\t\t\t\tshowAddRule: false,//修改规则对话框\n\n\t\t\t\tupIcon: upSvg,\n\n\t\t\t\ttarget: '#vRow',\n\t\t\t\toptions: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\toffset: 0,\n\t\t\t\t\teasing: 'easeInOutCubic'\n\t\t\t\t},\n\t\t\t\t\n\t\t\t\truleData:[],\n\t\t\t\t\n\t\t\t\titems: []\n\t\t\t}\n\t\t},\n\n\t\tmethods: {\n\t\t\tcloseSetting(){\n\t\t\t\t\n\t\t\t\tthis.showSetDialog = false;\n\t\t\t\t\n\t\t\t},\n\t\t\t\n\t\t\tshowSetting(){//打开设置\n\t\t\t\tthis.showSetDialog = true;\n\t\t\t},\n\t\t\t\n\t\t\taddSelect(id){//选中一个交易对\n\t\t\t\tlet index = this.neighborhoods.indexOf(id);\n\t\t\t\tif(index>-1){\n\t\t\t\t\tthis.neighborhoods.splice(index,1);\n\t\t\t\t}else{\n\t\t\t\t\tthis.neighborhoods.push(id);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tcloseAddColl(){//添加托管对话框-关闭\n\t\t\t\tthis.addCollocation = false;\n\t\t\t\tthis.neighborhoods = [];\n\t\t\t\tthis.$refs.form.resetValidation();\n\t\t\t},\n\n\t\t\tdebounce(){//节流\n\t\t\t\tvar t;\n\t\t\t\tclearTimeout(this.t);\n\t\t\t\t\n\t\t\t\tthis.t = setTimeout(() => {\n\t\t\t\t\tlet that = this;\n\t\t\t\t\tif (!that.isEmpty(this.search)) {\n\n\t\t\t\t\t\tlet obj = this.fuzzyQuery(this.search);\n\n\t\t\t\t\t\tthis.ruleData = obj;\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tthis.ruleData = this.names2;\n\t\t\t\t\t}\n\t\t\t\t}, 3000);\n\t\t\t},\n\t\t\t\n\t\t\tfuzzyQuery(keyWord) {//模糊查询\n\t\t\t    var reg =  new RegExp(keyWord);\n\t\t\t    var arr = [];\n\t\t\t\tthis.names2.forEach(item =>{\n\t\t\t\t\tif (reg.test(item.name)) {\n\t\t\t\t\t\tarr.push(item);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t    return arr;\n\t\t\t},\n\t\t\t  \n\t\t\t  \n\t\t\tisEmpty(obj) {//判断字符是否为空的方法\n\t\t\t\tif (typeof obj == 'undefined' || obj == null || obj == '' || (obj.length > 0 && obj.trim().length == 0)) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\tcancelSearch(){//取消搜索\n\t\t\t\tthis.search = '';\n\t\t\t\tthis.ruleData = this.names2;\n\t\t\t},\n\t\t\t\n\t\t\ttransUpperCase(data) { //交易对转大写\n\t\t\t\treturn data.toUpperCase();\n\t\t\t},\n\t\t\t\n\t\t\tshowChip(item) { //显示操作面板\n\t\t\t\tthis.$set(item,'show',!item.show); //取反\n\t\t\t\tthis.currentRule = item;\n\t\t\t},\n\n\t\t\tonOperation(item){ //改变托管的状态-启动/暂停\n\t\t\t\tlet send = {\n\t\t\t\t\tdata:[{id:item.id}],\n\t\t\t\t\tcode:item.isRun==0?1004:1005\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t\t},\n\n\t\t\tonPosition(item){ //平仓/建仓-单个\n\t\t\t\tlet send = {\n\t\t\t\t\tdata:[{id:item.id}],\n\t\t\t\t\tcode:item.isHas==0?1011:1012\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t\t},\n\n\t\t\tonRemove(item){//删除单个托管\n\t\t\t\tlet send = {\n\t\t\t\t\tdata:[{id:item.id}],\n\t\t\t\t\tcode:1010\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.websocketsend(JSON.stringify(send));\n\t\t\t},\n\n\t\t\tonEdit(item) { //编辑规则\n\t\t\t\t//用某id得到对应的规则 传递给组件\n\t\t\t\tthis.showAddRule = true;\n\t\t\t},\n\n\t\t\thideRule() { //隐藏规则输入框\n\t\t\t\tthis.showAddRule = false;\n\t\t\t},\n\t\t\t\n\t\t\tallEnd(){//全部停止\n\t\t\t\tthis.$Modal.confirm({\n\t\t\t\t\ttitle: '交易托管',\n\t\t\t\t\tcontent: '<p>是否全部停止?</p>',\n\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\tlet json = JSON.stringify({code:1003});\n\t\t\t\t\t\tthis.websocketsend(json);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\tallStart(){//全部启动\n\t\t\t\tthis.$Modal.confirm({\n\t\t\t\t\ttitle: '交易托管',\n\t\t\t\t\tcontent: '<p>是否全部启动?</p>',\n\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\tlet code = JSON.stringify({code:1002});\n\t\t\t\t\t\tthis.websocketsend(code);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\taddTo(){//添加至托管\n\t\t\t\tif (this.$refs.form.validate()) {\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\n\t\t},\n\t\tdestroyed() {\n\t\t\tclearTimeout(this.t);\n\t\t},\n\t\tmounted() {\n\t\t\tthis.ruleData = this.names2;\n\t\t\t\n\t\t\tthis.$sock.initWebSocket();\n\n\t\t\tif(sessionStorage.apiPublic){\n\t\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t\t}else{\n\t\t\t\t$ax.getTestData('/EasWebUser/getAPIData',{},(res)=> {\n\t\t\t\t\tif(res.code == 1){\t\t\t\t\n\t\t\t\t\t\tsessionStorage.apiPublic = JSON.stringify(res.data);\n\t\t\t\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t//请求数据\n\t\t\t\n\t\t\tthis.loading = false;\n\t\t\t\n\t\t\t\n\t\t},\n\t\tbeforeRouteLeave(to,from,next){//路由离开前断开\n\t\t\tthis.$sock.close();\n\t\t\tnext();\n\t\t}\n\t}\n</script>\n\n<style scoped=\"scoped\">\n\t.fade-enter-active,\n\t.fade-leave-active {\n\t\ttransition: opacity .5s\n\t}\n\n\t.fade-enter,\n\t.fade-leave-active {\n\t\topacity: 0\n\t}\n\t\n\t\n\t::-webkit-scrollbar{\n\t\twidth: 10px;\n\t}\n\t::-webkit-scrollbar-track{\n\t\tbackground: #E8F5E9;\n\t}\n\t::-webkit-scrollbar-thumb{\n\t\tbackground: linear-gradient(#B3E5FC,#81C784);\n\t\tborder-radius: 10px;\n\t}\n</style>\n"]}]}