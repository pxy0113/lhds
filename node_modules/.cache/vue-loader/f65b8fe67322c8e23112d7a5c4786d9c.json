{"remainingRequest":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\lhds\\src\\views\\mobile\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\work\\lhds\\src\\views\\mobile\\List.vue","mtime":1572594169978},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapActions\n} from 'vuex';\nimport upSvg from '@/img/up.svg'\nimport datePickers from '@/components/datePickers.vue'\nimport orderList from '@/views/mobile/Order.vue'\nimport tableList from '@/views/mobile/TableList.vue'\nexport default {\n\tcomponents: {\n\t\torderList,\n\t\ttableList,\n\t\tdatePickers\n\t},\n\tdata: () => ({\n\t\ttypeArr: [{\n\t\t\t\tid: 0,\n\t\t\t\tvalue: '收益数据'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 1,\n\t\t\t\tvalue: '下单数据'\n\t\t\t},\n\t\t],\n\n\t\tloading: true, //控制骨架屏 true表示显示\n\n\t\ttransition: 'fade-transition',\n\n\t\tupIcon: upSvg,\n\n\t\turls: ['/EasWebUser/getPlace', '/EasWebUser/getClose'],\n\n\t\ttarget: '#vRow',\n\t\toptions: {\n\t\t\tduration: 1000,\n\t\t\toffset: 0,\n\t\t\teasing: 'easeInOutCubic'\n\t\t},\n\n\t\tstartTime: '',\n\t\tendTime: '',\n\n\t\titems: [], //下单记录列表\n\n\t\ttabIndex: 0, //当前下标\n\n\t\tsize: 50,\n\n\t\tcomponentArr: ['orderList', 'tableList'], //组件数组\n\n\t}),\n\tmethods: {\n\t\tinit() { //初始化\n\t\t\tthis.draw(); //画箭头\n\t\t\tlet day1 = this.$moment().startOf('day').format('YYYY-MM-DD HH:mm:ss');;\n\t\t\tlet day2 = this.$moment().endOf('day').format('YYYY-MM-DD HH:mm:ss');\n\n\t\t\tthis.startTime = day1;\n\t\t\tthis.endTime = day2;\n\n\t\t\tlet list = {\n\t\t\t\t\"beginTime\": this.$moment(day1).format('x'),\n\t\t\t\t\"endTime\": this.$moment(day2).format('x'),\n\t\t\t\t\"pageSize\": 10,\n\t\t\t\t\"pageIndex\": 1\n\t\t\t}\n\t\t\tthis.getListData(list);\n\t\t},\n\n\t\tdoSomething() {\n\t\t\tconsole.log('渲染了' + this.componentArr[this.tabIndex])\n\t\t\t// this.$refs.componentType.init();\n\t\t},\n\t\tchangeTab() {\n\t\t\tlet list = {\n\t\t\t\t\"beginTime\": this.$moment(this.startTime).format('x'),\n\t\t\t\t\"endTime\": Number(this.$moment(this.endTime).format('x')) + 59000 + \"\",\n\t\t\t\t\"pageSize\": 10,\n\t\t\t\t\"pageIndex\": 1\n\t\t\t}\n\t\t\tthis.getListData(list);\n\t\t},\n\n\t\tinputShow(number) {\n\t\t\tthis.curPage.page = number;\n\t\t\tlet start = this.$moment(this.startTime).format('x');\n\t\t\tlet end = this.$moment(this.endTime).format('x');\n\t\t\tlet list = {\n\t\t\t\t\"beginTime\": start,\n\t\t\t\t\"endTime\": end,\n\t\t\t\t\"pageSize\": 10,\n\t\t\t\t\"pageIndex\": this.curPage.page ? this.curPage.page : 0\n\t\t\t}\n\t\t\tthis.$vuetify.goTo(this.target, this.options); //平滑滚动到表头\n\t\t\tthis.getListData(list);\n\t\t},\n\n\t\t...mapActions(['changeSnack']),\n\n\t\tstartTimeChange(time) {\n\t\t\tthis.startTime = time;\n\t\t},\n\n\t\tendTimeChange(time) {\n\t\t\tthis.endTime = time;\n\t\t},\n\n\t\tsearch() { //搜索列表\n\n\t\t\tif (this.startTime && this.endTime) {\n\t\t\t\tlet start = this.$moment(this.startTime).valueOf();\n\t\t\t\tlet end = this.$moment(this.endTime).valueOf();\n\t\t\t\tif (end > start) {\n\t\t\t\t\tlet list = {\n\t\t\t\t\t\t\"beginTime\": this.$moment(this.startTime).format('x'),\n\t\t\t\t\t\t\"endTime\": Number(this.$moment(this.endTime).format('x')) + 59000 + \"\",\n\t\t\t\t\t\t\"pageSize\": 10,\n\t\t\t\t\t\t\"pageIndex\": 1\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.getListData(list);\n\t\t\t\t} else {\n\n\t\t\t\t\tlet msg = {\n\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\terrorText: {\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\ttext: '开始时间不能大于结束时间'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.changeSnack(msg);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet msg = {\n\t\t\t\t\tstate: true,\n\t\t\t\t\terrorText: {\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\ttext: '请填写时间再搜索'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.changeSnack(msg);\n\t\t\t}\n\t\t},\n\t\tdraw() { //画箭头\n\t\t\tthis.size = this.$refs.dateTemplate.offsetHeight;\n\t\t\tlet canvas = document.getElementById('canvas');\n\t\t\tcanvas.width = this.size;\n\t\t\tcanvas.height = this.size;\n\t\t\tlet ctx = canvas.getContext('2d');\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(this.size / 4 + 6.25, 0);\n\t\t\tctx.lineTo(this.size / 2 + 6.25, this.size / 2);\n\t\t\tctx.lineTo(this.size / 4 + 6.25, this.size);\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.strokeStyle = '#66BB6A';\n\t\t\tctx.stroke();\n\n\t\t},\n\n\t\tgetListData(list) { //获取下单数据\n\t\t\tthis.loading = true;\n\t\t\t$ax.getAjaxData(this.urls[this.tabIndex], list, (res) => {\n\t\t\t\tif (res.code == 1) {\n\t\t\t\t\tlet data = res.data;\n\t\t\t\t\tthis.curPage = {\n\t\t\t\t\t\tpage: res.pageIndex,\n\t\t\t\t\t\tsize: res.pageMaxPage\n\t\t\t\t\t};\n\t\t\t\t\tdata.forEach(item => {\n\t\t\t\t\t\titem.placeTime = this.$utils.timestampToTime(Number(item.placeTime));\n\t\t\t\t\t});\n\t\t\t\t\tthis.items = data;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.log('错误错误')\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false;\n\n\t\t\t}, {\n\t\t\t\thasToken: true\n\t\t\t});\n\t\t}\n\n\t},\n\tmounted() {\n\t\tthis.init();\n\t}\n}\n",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/mobile","sourcesContent":["<template>\r\n\t<div class=\"pa-2\">\r\n\t\t<!-- <v-tabs v-model=\"tabIndex\" color=\"green\" @change=\"changeTab\">\r\n\t\t\t<v-tab>收益数据</v-tab>\r\n\t\t\t<v-tab>下单数据</v-tab>\r\n\t\t</v-tabs> -->\r\n\t\t<div class=\"d-flex flex-column mt-1\" v-resize=\"draw\" id=\"vRow\">\r\n\t\t\t<div style=\"border: 1px solid #66BB6A;\">\r\n\t\t\t\t<div class=\" green lighten-5 dateTemplate\" ref=\"dateTemplate\">\r\n\t\t\t\t\t<date-pickers :value=\"startTime\" @changeTime=\"startTimeChange\"></date-pickers>\r\n\t\t\t\t\t<canvas id=\"canvas\" :style=\"{'width':'50px','height':size+'px'}\"></canvas>\r\n\t\t\t\t\t<date-pickers :value=\"endTime\" @changeTime=\"endTimeChange\"></date-pickers>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"d-flex align-center justify-space-between flex-wrap my-1\">\r\n\t\t\t\t<div style=\"max-width: 200px;\">\r\n\t\t\t\t\t<v-select v-model=\"tabIndex\" @change=\"changeTab\" dense hide-details color=\"green\" :items=\"typeArr\" item-text=\"value\"\r\n\t\t\t\t\t item-color=\"green\" item-value=\"id\" single-line></v-select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<v-btn color=\"green\" depressed outlined class=\"ml-1\" @click=\"search\">\r\n\t\t\t\t\t<v-icon>mdi-magnify</v-icon>\r\n\t\t\t\t\t查询\r\n\t\t\t\t</v-btn>\r\n\t\t\t</div>\r\n\r\n\t\t\t<component :is=\"transition !== 'None' ? `v-${transition}` : 'div'\" hide-on-leave>\r\n\t\t\t\t<v-skeleton-loader v-if=\"loading\" type=\"article\">\r\n\t\t\t\t</v-skeleton-loader>\r\n\r\n\t\t\t\t<div v-else>\r\n\t\t\t\t\t<v-list-item three-line v-if=\"items.length<1\" class=\"xy-tableItem\">\r\n\t\t\t\t\t\t<p class=\"text-center\" style=\"width: 100%;\">暂无数据</p>\r\n\t\t\t\t\t</v-list-item>\r\n\r\n\t\t\t\t\t<component v-else :is=\"componentArr[tabIndex]\" ref=\"componentType\" :items=\"items\" @hook:mounted=\"doSomething\"></component>\r\n\t\t\t\t\t<div class=\"text-center my-4\" v-if=\"items.length>0\">\r\n\t\t\t\t\t\t<v-pagination color=\"green\" v-model=\"curPage.page\" :length=\"curPage.size\" v-on:input=\"inputShow\" :total-visible=\"7\"></v-pagination>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</component>\r\n\r\n\t\t\t<v-fab-transition>\r\n\r\n\t\t\t\t<Avatar :src=\"upIcon\" v-if=\"items.length>=5\" class=\"xy-suspend\" @click.stop.native=\"$vuetify.goTo(target, options)\">\r\n\t\t\t\t</Avatar>\r\n\t\t\t</v-fab-transition>\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\timport upSvg from '@/img/up.svg'\r\n\timport datePickers from '@/components/datePickers.vue'\r\n\timport orderList from '@/views/mobile/Order.vue'\r\n\timport tableList from '@/views/mobile/TableList.vue'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\torderList,\r\n\t\t\ttableList,\r\n\t\t\tdatePickers\r\n\t\t},\r\n\t\tdata: () => ({\r\n\t\t\ttypeArr: [{\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tvalue: '收益数据'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tvalue: '下单数据'\r\n\t\t\t\t},\r\n\t\t\t],\r\n\r\n\t\t\tloading: true, //控制骨架屏 true表示显示\r\n\r\n\t\t\ttransition: 'fade-transition',\r\n\r\n\t\t\tupIcon: upSvg,\r\n\r\n\t\t\turls: ['/EasWebUser/getPlace', '/EasWebUser/getClose'],\r\n\r\n\t\t\ttarget: '#vRow',\r\n\t\t\toptions: {\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\toffset: 0,\r\n\t\t\t\teasing: 'easeInOutCubic'\r\n\t\t\t},\r\n\r\n\t\t\tstartTime: '',\r\n\t\t\tendTime: '',\r\n\r\n\t\t\titems: [], //下单记录列表\r\n\r\n\t\t\ttabIndex: 0, //当前下标\r\n\r\n\t\t\tsize: 50,\r\n\r\n\t\t\tcomponentArr: ['orderList', 'tableList'], //组件数组\r\n\r\n\t\t}),\r\n\t\tmethods: {\r\n\t\t\tinit() { //初始化\r\n\t\t\t\tthis.draw(); //画箭头\r\n\t\t\t\tlet day1 = this.$moment().startOf('day').format('YYYY-MM-DD HH:mm:ss');;\r\n\t\t\t\tlet day2 = this.$moment().endOf('day').format('YYYY-MM-DD HH:mm:ss');\r\n\r\n\t\t\t\tthis.startTime = day1;\r\n\t\t\t\tthis.endTime = day2;\r\n\r\n\t\t\t\tlet list = {\r\n\t\t\t\t\t\"beginTime\": this.$moment(day1).format('x'),\r\n\t\t\t\t\t\"endTime\": this.$moment(day2).format('x'),\r\n\t\t\t\t\t\"pageSize\": 10,\r\n\t\t\t\t\t\"pageIndex\": 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.getListData(list);\r\n\t\t\t},\r\n\r\n\t\t\tdoSomething() {\r\n\t\t\t\tconsole.log('渲染了' + this.componentArr[this.tabIndex])\r\n\t\t\t\t// this.$refs.componentType.init();\r\n\t\t\t},\r\n\t\t\tchangeTab() {\r\n\t\t\t\tlet list = {\r\n\t\t\t\t\t\"beginTime\": this.$moment(this.startTime).format('x'),\r\n\t\t\t\t\t\"endTime\": Number(this.$moment(this.endTime).format('x')) + 59000 + \"\",\r\n\t\t\t\t\t\"pageSize\": 10,\r\n\t\t\t\t\t\"pageIndex\": 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.getListData(list);\r\n\t\t\t},\r\n\r\n\t\t\tinputShow(number) {\r\n\t\t\t\tthis.curPage.page = number;\r\n\t\t\t\tlet start = this.$moment(this.startTime).format('x');\r\n\t\t\t\tlet end = this.$moment(this.endTime).format('x');\r\n\t\t\t\tlet list = {\r\n\t\t\t\t\t\"beginTime\": start,\r\n\t\t\t\t\t\"endTime\": end,\r\n\t\t\t\t\t\"pageSize\": 10,\r\n\t\t\t\t\t\"pageIndex\": this.curPage.page ? this.curPage.page : 0\r\n\t\t\t\t}\r\n\t\t\t\tthis.$vuetify.goTo(this.target, this.options); //平滑滚动到表头\r\n\t\t\t\tthis.getListData(list);\r\n\t\t\t},\r\n\r\n\t\t\t...mapActions(['changeSnack']),\r\n\r\n\t\t\tstartTimeChange(time) {\r\n\t\t\t\tthis.startTime = time;\r\n\t\t\t},\r\n\r\n\t\t\tendTimeChange(time) {\r\n\t\t\t\tthis.endTime = time;\r\n\t\t\t},\r\n\r\n\t\t\tsearch() { //搜索列表\r\n\r\n\t\t\t\tif (this.startTime && this.endTime) {\r\n\t\t\t\t\tlet start = this.$moment(this.startTime).valueOf();\r\n\t\t\t\t\tlet end = this.$moment(this.endTime).valueOf();\r\n\t\t\t\t\tif (end > start) {\r\n\t\t\t\t\t\tlet list = {\r\n\t\t\t\t\t\t\t\"beginTime\": this.$moment(this.startTime).format('x'),\r\n\t\t\t\t\t\t\t\"endTime\": Number(this.$moment(this.endTime).format('x')) + 59000 + \"\",\r\n\t\t\t\t\t\t\t\"pageSize\": 10,\r\n\t\t\t\t\t\t\t\"pageIndex\": 1\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.getListData(list);\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\tstate: true,\r\n\t\t\t\t\t\t\terrorText: {\r\n\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\ttext: '开始时间不能大于结束时间'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.changeSnack(msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\tstate: true,\r\n\t\t\t\t\t\terrorText: {\r\n\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\ttext: '请填写时间再搜索'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.changeSnack(msg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdraw() { //画箭头\r\n\t\t\t\tthis.size = this.$refs.dateTemplate.offsetHeight;\r\n\t\t\t\tlet canvas = document.getElementById('canvas');\r\n\t\t\t\tcanvas.width = this.size;\r\n\t\t\t\tcanvas.height = this.size;\r\n\t\t\t\tlet ctx = canvas.getContext('2d');\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(this.size / 4 + 6.25, 0);\r\n\t\t\t\tctx.lineTo(this.size / 2 + 6.25, this.size / 2);\r\n\t\t\t\tctx.lineTo(this.size / 4 + 6.25, this.size);\r\n\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\tctx.strokeStyle = '#66BB6A';\r\n\t\t\t\tctx.stroke();\r\n\r\n\t\t\t},\r\n\r\n\t\t\tgetListData(list) { //获取下单数据\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\t$ax.getAjaxData(this.urls[this.tabIndex], list, (res) => {\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tthis.curPage = {\r\n\t\t\t\t\t\t\tpage: res.pageIndex,\r\n\t\t\t\t\t\t\tsize: res.pageMaxPage\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tdata.forEach(item => {\r\n\t\t\t\t\t\t\titem.placeTime = this.$utils.timestampToTime(Number(item.placeTime));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.items = data;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.log('错误错误')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t}, {\r\n\t\t\t\t\thasToken: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.dateTemplate {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\ttext-align: center;\r\n\t\tpadding: 0 16px;\r\n\t\twidth: 100%;\r\n\t\tcolor: #37474F;\r\n\t}\r\n</style>\n"]}]}