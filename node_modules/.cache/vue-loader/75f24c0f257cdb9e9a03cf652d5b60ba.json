{"remainingRequest":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\views\\Dem.1.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\views\\Dem.1.vue","mtime":1581821930387},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572955172692},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1572955235189},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":1572955171173},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572955172692},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\vue-loader\\lib\\index.js","mtime":1572955240129}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Utils from '@/plugins/cryAes.js'\nimport wait from '@/components/other/wait/Wait.vue'\nimport { scrollMixins } from '@/mixins/scroll.js'\nimport {\n\tmapActions\n} from 'vuex';\nexport default {\n\tinject: ['theme'],\n\tmixins:[scrollMixins],\n\tcomponents:{ wait },\n\tdata() {\n\t\treturn {\n\t\t\trunState:[\n\t\t\t\t{\n\t\t\t\t\ttext:'待启动',\n\t\t\t\t\tcolor:'#E53935'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext:'运行中',\n\t\t\t\t\tcolor:'#43A047'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext:'建仓中',\n\t\t\t\t\tcolor:'orange'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext:'平仓中',\n\t\t\t\t\tcolor:'blue'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext:'暂停中',\n\t\t\t\t\tcolor:'#009688'\n\t\t\t\t}\n\t\t\t],\n\t\t\t\n\t\t\ttypeArr:['主','补'],\n\t\t\t\n\t\t\tactionList: [ //设置与操作列表\n\t\t\t\t{ id:1,text: '设置' },\n\t\t\t\t{ id:2,text: '添加托管' },\n\t\t\t\t{ id:3,text: '全部启动' },\n\t\t\t\t{ id:4,text: '全部停止' }\n\t\t\t],\n\t\t\t\n\t\t\tsettingData:{},//传递给设置Dialog的数据\n\t\t\t\n\t\t\tusable:false,//可以设置/全启动/新增/全暂停\n\t\t\t\n\t\t\tshow:false,//添加托管没满足搜索条件\n\t\t\t\n\t\t\ttips:'暂无数据',\n\t\t\t\n\t\t\tshowSetDialog:false,//显示设置对话框\n\t\t\t\n\t\t\ttransition: 'fade-transition',\n\t\t\t\n\t\t\tloading:true,//控制骨架屏 true表示显示\n\t\t\t\n\t\t\taccountList:[],//选择账户\n\t\t\t\n\t\t\trulesList:[],//选择规则\n\n\t\t\tneighborhoods:[],//已选择的\n\t\t\t\n\t\t\tsearch:'',\n\t\t\t\n\t\t\tvalid:true,//表格验证\n\n\t\t\tcurrency: [//货币类型\n\t\t\t  { id: 1, value: 'USDT' },\n\t\t\t  { id: 2, value: 'ETH' },\n\t\t\t  { id: 3, value: 'BTC' },\n\t\t\t],\n\t\t\t\n\t\t\tcondition:{//新增托管-搜索条件\n\t\t\t\tcurrency:'',\n\t\t\t\taccount:'',\n\t\t\t\trule:''\n\t\t\t},\n\t\t\t\n\t\t\taddCollocation:false,//添加托管对话框\n\t\t\t\n\t\t\tcurrentRule: null,//当前规则\n\n\t\t\tshowAddRule: false,//修改规则对话框\n\t\t\t\n\t\t\tnames2:[],\n\t\t\t\n\t\t\truleData:[],//货币数据\n\t\t\t\n\t\t\titems: [] ,//托管列表\n\t\t\t\n\t\t\ttestArr:[]\n\t\t}\n\t},\n\n\twatch:{\n\t\t'condition.currency'(newV, oldV) {\n\t\t\tif((!this.isEmpty(newV))&&(!this.isEmpty(this.condition.account))){\n\t\t\t\t\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.getExchange();\n\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.show = false;\n\t\t\t\tthis.ruleData = [];\n\t\t\t}\n\t\t}, \n\t\t\n\t\t'condition.account'(newV, oldV) {\n\t\t\tif((!this.isEmpty(newV))&&(!this.isEmpty(this.condition.currency))){\n\t\t\t\t\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.getExchange();\n\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.show = false;\n\t\t\t\tthis.ruleData = [];\n\t\t\t}\n\t\t}, \n\t\twssData:{\n\t\t\thandler(nV,oV){\n\t\t\t\tif(nV.length==0&&this.$sock.lookState()==-1){\n\t\t\t\t\tObject.assign(this.$data, this.$options.data());\n\t\t\t\t\tthis.tips = '连接失败,刷新后重试';\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t}\n\t\t\t\tthis.getMessage();\n\n\t\t\t},\n\t\t\tdeep:true\n\t\t},\n\t\truleData(nV){\n\t\t\t\n\t\t\tthis.neighborhoods = [];\n\t\t\tthis.testArr.forEach(item =>{\n\t\t\t\tlet idx = nV.indexOf(item);\n\t\t\t\tif(idx>-1){\n\t\t\t\t\tthis.neighborhoods.push(idx);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowSetDialog:{\n\t\t\thandler(nV,oV){\n\t\t\t\tnV&&this.afterOpen();//mixins不允许滚动\n\t\t\t\t!nV&&this.beforeClose();\n\t\t\t},\n\t\t\timmediate:true\n\t\t},\n\t\taddCollocation:{\n\t\t\thandler(nV,oV){\n\t\t\t\tnV&&this.afterOpen();//mixins不允许滚动\n\t\t\t\t!nV&&this.beforeClose();\n\t\t\t},\n\t\t\timmediate:true\n\t\t}\n\t\t\n\t\t\n\t},\n\n\tcomputed:{\n\t\twssData(){//wss传递的消息\n\t\t\treturn this.$store.state.collocationList;\n\t\t}\n\t},\n\n\tmethods: {\n\t\t...mapActions(['changeLay']),\n\t\t\n\t\ttoFunction(id){//点击操作列表的项\n\t\t\t(id==1)&&this.showSetting();\n\t\t\t(id==2)&&this.addColl();\n\t\t\t(id==3)&&this.allStart();\n\t\t\t(id==4)&&this.allEnd();\n\t\t},\n\t\t\n\t\tgetExchange(){//获取货币数据\n\t\t\tthis.testArr = [];\n\t\t\t\n\t\t\tthis.neighborhoods = [];\n\t\t\t\n\t\t\t//0216\n\t\t\tthis.names2 = ['ETH','MKC','BCH','BACC','CAM'];\n\t\t\tthis.ruleData = this.names2;\n\t\t\t\n\t\t\t//0216\n\t\t\t\n\t\t\tlet json = {\n\t\t\t\tcode:1015,\n\t\t\t\tdata:{\n\t\t\t\t\taccount:this.condition.account,\n\t\t\t\t\tcurrency:this.condition.currency\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.$sock.websocketsend(JSON.stringify(json));\n\t\t},\n\t\t\n\t\tcloseSetting(obj){ //设置对话框关闭\n\t\t\n\t\t\tif(obj.state){\n\t\t\t\tlet json = {\n\t\t\t\t\tcode:1014,\n\t\t\t\t\tdata:obj.data\n\t\t\t\t}\n\t\t\t\tthis.$sock.websocketsend(JSON.stringify(json));\n\n\t\t\t};\n\t\t\tthis.showSetDialog = false;\n\t\t\t\n\t\t},\n\t\t\n\t\tshowSetting(){//打开设置\n\t\t\n\t\t\tthis.$sock.websocketsend(JSON.stringify({code:1013}));\n\t\t},\n\t\t\n\t\taddSelect(name,index){//选中一个交易对\n\t\t\tlet idx = this.neighborhoods.indexOf(index);\n\t\t\t\n\t\t\tif(idx==-1){//不存在则添加\n\t\t\t\tthis.testArr.push(name);\n\t\t\t\t\n\t\t\t\tthis.testArr = Array.from(new Set(this.testArr));\n\t\t\t\t\n\t\t\t\tthis.neighborhoods.push(index);\n\t\t\t\t\n\t\t\t\tconsole.log(name,index)\n\t\t\t}else{\n\t\t\t\tlet i =this.testArr.indexOf(name);\n\n\t\t\t\tif(i>-1){\n\t\t\t\t\tthis.testArr.splice(this.testArr.indexOf(name),1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.neighborhoods.splice(idx,1);\n\n\t\t\t}\n\n\t\t},\n\t\t\n\t\taddColl(){//打开添加托管对话框\n\t\t\tthis.addCollocation = true;\n\n\t\t\tif(sessionStorage.collocation){\n\t\t\t\tlet d = JSON.parse(sessionStorage.collocation);\n\t\t\t\tthis.accountList = d.accounts;\n\t\t\t\tthis.rulesList = d.rule;\n\t\t\t\tif((!this.isEmpty(this.condition.currency))&&(!this.isEmpty(this.condition.account))&&(!this.isEmpty(this.condition.rule))){\n\t\t\t\t\tthis.getExchange();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tlet promiseAll = [this.getApiId(),this.getRuleId()];\n\t\t\t\t\n\t\t\t\tthis.changeLay(true);\n\t\t\t\t\n\t\t\t\tPromise.all(promiseAll).then(results => {\n\t\t\t\t\tthis.changeLay(false);\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\tresults.forEach(item =>{\n\t\t\t\t\t\tif(item.account){\n\t\t\t\t\t\t\tthis.accountList = item.account;\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(item.rule){\n\t\t\t\t\t\t\tthis.rulesList = item.rule;\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(i==2){\n\t\t\t\t\t\tlet sess = {\n\t\t\t\t\t\t\taccounts:this.accountList,\n\t\t\t\t\t\t\trule:this.rulesList\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsessionStorage.collocation = JSON.stringify(sess)\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetApiId(){//获取账户列表\n\t\t\treturn new Promise(resolve =>{\n\t\t\t\t$ax.getAjaxData('/EasWebUser/getAPIID',{}, (res) =>{\n\t\t\t\t\tif(res.code == 1){\n\t\t\t\t\t\tresolve({account:res.data});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t},{hasToken:true});\n\t\t\t});\n\t\t},\n\t\t\n\t\tgetRuleId(){//获取规则列表\n\t\t\treturn new Promise(resolve =>{\n\t\t\t\t$ax.getAjaxData('/EasWebUser/getRuleID',{}, (res) =>{\n\t\t\t\t\tif(res.code == 1){\n\t\t\t\t\t\tresolve({rule:res.data});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t},{hasToken:true});\n\t\t\t});\n\t\t},\n\t\t\n\t\tcloseAddColl(){//添加托管对话框-关闭\n\t\t\tthis.addCollocation = false;\n\t\t\tthis.testArr = [];\n\t\t\tthis.neighborhoods = [];\n\t\t\tthis.$refs.form.resetValidation();\n\t\t},\n\n\t\tdebounce(){//节流\n\t\t\tvar t;\n\t\t\tclearTimeout(this.t);\n\t\t\t\n\t\t\tthis.t = setTimeout(() => {\n\t\t\t\tlet that = this;\n\t\t\t\tif (!that.isEmpty(this.search)) {\n\n\t\t\t\t\tlet obj = this.fuzzyQuery(this.search);\n\t\t\t\t\t\n\t\t\t\t\tthis.ruleData = obj;\n\t\t\t\t\tthis.neighborhoods = [];//0215新增\n\n\t\t\t\t}else{\n\n\t\t\t\t\tthis.ruleData = this.names2;\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\tfuzzyQuery(keyWord) {//模糊查询\n\t\t    var reg =  new RegExp(keyWord);\n\t\t    var arr = [];\n\t\t\tthis.names2.forEach(item =>{\n\t\t\t\tif (reg.test(item)) {\n\t\t\t\t\tarr.push(item);\n\t\t\t\t}\n\t\t\t})\n\t\t    return arr;\n\t\t},\n\t\t  \n\t\t  \n\t\tisEmpty(obj) {//判断字符是否为空的方法\n\t\t\tif (typeof obj == 'undefined' || obj == null || obj == '' || (obj.length > 0 && obj.trim().length == 0)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\tcancelSearch(){//取消搜索\n\t\t\tthis.search = '';\n\t\t\tthis.ruleData = this.names2;\n\t\t\tthis.neighborhoods = [];//2016\n\t\t},\n\t\t\n\t\ttransUpperCase(data) { //交易对转大写\n\t\t\treturn data.toUpperCase();\n\t\t},\n\t\t\n\t\tshowChip(item) { //显示操作面板\n\t\t\tthis.$set(item,'show',!item.show); //取反\n\t\t\tthis.currentRule = item;\n\t\t},\n\n\t\tonOperation(item){ //改变托管的状态-启动/暂停\n\t\t\tlet send = {\n\t\t\t\tdata:[{id:item.id}],\n\t\t\t\tcode:item.isRun==0?1004:1005\n\t\t\t};\n\t\t\t\n\t\t\tthis.$sock.websocketsend(JSON.stringify(send));\n\t\t},\n\n\t\tonPosition(item){ //平仓/建仓-单个\n\t\t\tthis.$xyDialog({\n\t\t\t    content: item.isBuy==0?'确定建仓吗?':'确定平仓吗?',\n\t\t\t    onOk: () => {\n\t\t\t\t\tlet send = {\n\t\t\t\t\t\tdata:[{id:item.id}],\n\t\t\t\t\t\tcode:item.isBuy==0?1011:1012\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tthis.$sock.websocketsend(JSON.stringify(send));\t\t\t\t\t\t\n\t\t\t     }\n\t\t\t});\n\n\t\t},\n\t\t\n\t\tgetColRuleData(list){//托管规则数据\n\t\t\tlet data = list[0].data;\n\t\t\t\n\t\t\tthis.afterOpen();\n\t\t\t\n\t\t\tthis.currentRule = JSON.parse(Utils.decrypt(data));\n\t\t\t\n\t\t\tthis.currentRule.id = list[0].id;\n\t\t\t\n\t\t\tthis.showAddRule = true;\n\t\t\t\n\t\t},\n\t\t\n\t\tonRemove(item){//删除单个托管\t\t\t\n\t\t\tthis.$xyDialog({\n\t\t\t\ttitle:'删除托管',\n\t\t\t    content: item.isBuy==1?'交易对有持仓,确定要删除吗?':'确定删除吗?',\n\t\t\t    onOk: () => {\n\t\t\t\t\tlet send = {\n\t\t\t\t\t\tdata:[{id:item.id}],\n\t\t\t\t\t\tcode:1010\n\t\t\t\t\t};\t\n\t\t\t\t\t\n\t\t\t\t\tthis.$sock.websocketsend(JSON.stringify(send));\t\t\t\t\t\t\n\t\t\t     }\n\t\t\t});\n\n\t\t},\n\n\t\tonEdit(item) { //编辑规则 用某id得到对应的规则 传递给组件\n\t\t\tlet json = JSON.stringify({code:1016,data:[{id:item.id}]});\n\t\t\tlet state = this.$sock.lookState();\n\n\t\t\tthis.$sock.websocketsend(json);\n\n\t\t},\n\n\t\thideRule() { //隐藏规则输入框\n\t\t\tthis.showAddRule = false;\n\t\t\tthis.beforeClose();\n\t\t},\n\t\t\n\t\tallEnd(){//全部停止\n\t\t\tif(this.items.length>0){\n\t\t\t\tthis.$xyDialog({\n\t\t\t\t    content: '是否全部停止?',\n\t\t\t\t    onOk: () => {\n\t\t\t\t\t\tlet json = JSON.stringify({code:1003});\n\t\t\t\t\t\tthis.$sock.websocketsend(json);\n\t\t\t\t     }\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t},\n\t\t\n\t\tallStart(){//全部启动\n\t\t\tif(this.items.length>0){\n\t\t\t\tthis.$xyDialog({\n\t\t\t\t    content: '是否全部启动?',\n\t\t\t\t    onOk: () => {\n\t\t\t\t\t\tlet code = JSON.stringify({code:1002});\n\t\t\t\t\t\tthis.$sock.websocketsend(code);\n\t\t\t\t     }\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t},\n\t\t\n\t\taddTo(){//添加至托管\n\t\t\tif (this.$refs.form.validate()) {\n\t\t\t\tlet arr = [];\n\t\t\t\t\n\t\t\t\tconsole.log(this.neighborhoods,this.ruleData,this.names2)\n\t\t\t\t\n\t\t\t\tthis.neighborhoods.forEach(item =>{\n\t\t\t\t\tlet list = Object.assign({},{symbol:this.ruleData[item]},this.condition);\n\t\t\t\t\tarr.push(list);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tconsole.log(arr);\n\t\t\t\t\n\t\t\t\tlet code = JSON.stringify({code:1009,data:arr});\n\t\t\t\t\n\t\t\t\tthis.$sock.websocketsend(code);\n\t\t\t\t\n\t\t\t\tthis.closeAddColl();\n\t\t\t}\n\t\t},\n\t\tinitData(item){//初次收到数据\n\t\t\tthis.items = item;\n\t\t\t\n\t\t\tif(this.items.length ==0){\n\t\t\t\tthis.tips = '暂无数据';\n\t\t\t}\n\t\t},\n\t\t\n\t\tdelData(obj){//删除数据时\n\t\t\tobj.forEach(item =>{\n\n\t\t\t\tthis.items.forEach((fil,index) =>{\n\t\t\t\t\tif(fil.id == item.id ){\t\t\t\t\t\t\t\n\t\t\t\t\t\tthis.items.splice(index,1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif(this.items.length ==0){\n\t\t\t\tthis.tips = '暂无数据';\n\t\t\t}\n\t\t},\n\t\t\n\t\treLogin(){\n\t\t\tthis.$xyDialog({\n\t\t\t    content: '用户已经在其他地方登录!',\n\t\t\t\thideCancel:true,\n\t\t\t    onOk: () => {\n\t\t\t\t\tsessionStorage.clear();\n\t\t\t\t\tthis.$store.state.showBar = false;\n\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\tpath: '/login'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t\n\t\taddData(obj){//数据新增时\n\t\t\tthis.addCollocation = false;\n\t\t\n\t\t\tobj.forEach(item =>{\n\t\t\t\tthis.items.splice(0,0,item);\n\t\t\t});\n\t\t\tconsole.log('又新增啦')\n\t\t},\n\t\t\n\t\tchangeData(obj){//数据变化时\n\t\t\tobj.forEach(item =>{//变化的数组\n\t\t\t\tlet demo = this.items.find(fil =>fil.id == item.id);\n\t\t\t\t\n\t\t\t\tif(this.items.indexOf(demo)>-1){\n\t\t\t\t\tlet newData = Object.assign({},demo,item);\n\t\t\t\t\tthis.$set(this.items,this.items.indexOf(demo),newData);\n\t\t\t\t}\n\t\t\t\n\t\t\t});\n\t\t\t\n\t\t\tif(this.items.length ==0){\n\t\t\t\tthis.tips = '暂无数据';\n\t\t\t}\n\t\t},\n\t\t\n\t\tgetMessage(){//wss传递的消息\n\t\t\tlet result = this.wssData;\n\t\t\tswitch (result.code){\n\t\t\t\tcase 1000:\n\t\t\t\tthis.initData(result.data);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 1001:\n\t\t\t\tthis.changeData(result.data);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 1009:\n\t\t\t\tthis.neighborhoods = [];//取消选中\n\t\t\t\n\t\t\t\tthis.addData(result.data);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 1010:\n\t\t\t\tthis.delData(result.data);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 1013://获取设置参数\n\t\t\t\tthis.settingData = result.data;\n\t\t\t\tthis.showSetDialog = true;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 1015://获取货币数据\n\t\t\t\tthis.names2 = result.data;\n\t\t\t\tthis.ruleData = this.names2;\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 1016://获取托管规则数据\n\t\t\t\tthis.getColRuleData(result.data);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 20012:\n\t\t\t\tthis.items = [];\n\t\t\t\tthis.usable = false;\n\t\t\t\tthis.tips = '软件已离线';\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.showSetDialog = false;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 20011://重复登录\n\t\t\t\tthis.reLogin();\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 20013://客户端在线\n\t\t\t\tthis.usable = true;\n\t\t\t\tthis.loading = false;\n\t\t\t\tlet json = JSON.stringify({code:1000});\n\t\t\t\tthis.$sock.websocketsend(json);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\t\n\n\t},\n\t\n\tdestroyed() {\n\t\tconsole.log('销毁')\n\t\tclearTimeout(this.t);\n\t\tthis.$sock.close();\n\t},\n\tmounted() {\n\t\t this.$sock.initWebSocket();\n\n\t\tif(sessionStorage.apiPublic){\n\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\t$ax.getTestData('/EasWebUser/getAPIData',{},(res)=> {\n\t\t\t\tif(res.code == 1){\n\t\t\t\t\t\n\t\t\t\t\tsessionStorage.apiPublic = JSON.stringify(res.data);\n\t\t\t\t\tthis.datas = JSON.parse(sessionStorage.apiPublic);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t},\n\tbeforeRouteLeave(to,from,next){//路由离开前断开\n\t\tthis.$sock.close();\n\t\tthis.$store.state.collocationList = [];\n\t\tnext();\n\t}\n}\n",null]}