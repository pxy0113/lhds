{"remainingRequest":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js!F:\\work\\lhds\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\work\\lhds\\src\\mixins\\addRuleData.js","dependencies":[{"path":"F:\\work\\lhds\\src\\mixins\\addRuleData.js","mtime":1574406815345},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _defineProperty from \"F:\\\\work\\\\lhds\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapActions } from 'vuex';\nimport Utils from '@/plugins/cryAes.js';\nexport var addRuleData = {\n  props: {\n    ruleObj: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    edit: {\n      type: Boolean,\n      default: false\n    },\n    parentName: {\n      //父组件的名字\n      type: String,\n      default: 'Rule'\n    }\n  },\n  watch: {\n    edit: {\n      handler: 'transPropsData',\n      immediate: true\n    }\n  },\n  data: function data() {\n    return {\n      rules: {\n        required: function required(v) {\n          return !!v || '必填';\n        },\n        length: function length(v) {\n          return v && v.length <= 68 || '超出长度';\n        },\n        isEmpty: function isEmpty(v) {\n          return /\\S/.test(v) || '不可为空';\n        },\n        size: function size(v) {\n          return v > 0 || '必须大于0';\n        },\n        percent: function percent(v) {\n          return v <= 100 || '不可超出100';\n        },\n        not: function not(v) {\n          return !/[\\u4E00-\\u9FA5]/g.test(v) || '不能是中文';\n        }\n      },\n      valid: true,\n      ruleName: '',\n      //规则名称\n      jData: {\n        //建仓\n        R1: 0,\n        //买入跌幅\n        R3: 1,\n        //单次买入金额\n        R2: 0,\n        //跌幅回调\n        R54: null,\n        //计价货币\n        R11: false,\n        //允许强制建仓\n        R12: 0,\n        //强制建仓\n        R13: false,\n        //允许\n        R14: 1,\n        //分钟内上涨\n        R15: 0,\n        //追涨建仓\n        R36: 1,\n        //防插针\n        R7: 0,\n        //单次补仓跌幅\n        R10: 0,\n        //补仓回调\n        R9: 0,\n        //单次补仓金额\n        R8: 0,\n        //补仓\n        R19: false,\n        //补仓单独卖出\n        R20: false,\n        //补单可进行补仓\n        R4: 0,\n        //卖出涨幅\n        R5: 0,\n        //涨幅回调\n        R6: 0,\n        //止损跌幅\n        R16: false,\n        //允许分钟内下跌\n        R17: 0,\n        //分钟内下跌\n        R18: 0,\n        //杀跌平仓\n        R26: false,\n        //允许补仓\n        R27: 0,\n        //分钟内下跌\n        R28: 0,\n        //时\n        R29: 0,\n        //补仓比例更改为\n        R30: 0,\n        //分钟后回复数值\n        R21: false,\n        //允许止损\n        R22: 0,\n        R23: 0,\n        R24: 0,\n        R25: 0,\n        R31: false,\n        //允许建仓\n        R32: 0,\n        R33: 0,\n        R34: 0,\n        R35: 0\n      },\n      activeRule: 0,\n      curcy: 1,\n      //当前的R54(货币)\n      currency: [{\n        id: 1,\n        value: 'USDT'\n      }, {\n        id: 2,\n        value: 'ETH'\n      }, {\n        id: 3,\n        value: 'BTC'\n      }],\n      child: ['建仓规则', '平仓规则', '补仓规则', '其他规则'],\n      type: 0\n    };\n  },\n  methods: _objectSpread({}, mapActions(['changeLay', 'changeSnack']), {\n    wssSave: function wssSave() {\n      //传递数据给ws\n      var json = JSON.stringify({\n        code: 1006\n      });\n      this.$sock.websocketsend(json);\n    },\n    listenState: function listenState(name) {\n      this.jData.R19 = name;\n      name == true ? '' : this.jData.R20 = false;\n    },\n    validateData: function validateData() {\n      //点击下一步的时候验证\n      if (this.$refs.form.validate()) {\n        this.activeRule++;\n        this.$refs.form.resetValidation();\n      } else {\n        this.changeSnack({\n          state: true,\n          errorText: {\n            type: 'info',\n            text: '表单填写错误'\n          }\n        });\n      }\n    },\n    transPropsData: function transPropsData() {\n      //编辑初始化对数据进行转换\n      if (this.edit) {\n        var item = _objectSpread({}, this.ruleObj);\n\n        this.curcy = Number(item.R54);\n        this.ruleName = item.R0 ? this.unescapeF(item.R0) : '';\n        var _ref = [item.R11 == 1 ? true : false, item.R13 == 1 ? true : false, item.R19 == 1 ? true : false, item.R16 == 1 ? true : false, item.R20 == 1 ? true : false, item.R21 == 1 ? true : false, item.R26 == 1 ? true : false, item.R31 == 1 ? true : false],\n            R11 = _ref[0],\n            R13 = _ref[1],\n            R19 = _ref[2],\n            R16 = _ref[3],\n            R20 = _ref[4],\n            R21 = _ref[5],\n            R26 = _ref[6],\n            R31 = _ref[7];\n        this.jData = Object.assign({}, item, {\n          R11: R11,\n          R13: R13,\n          R19: R19,\n          R16: R16,\n          R20: R20,\n          R21: R21,\n          R26: R26,\n          R31: R31\n        });\n      }\n    },\n    selectCurrency: function selectCurrency(e) {\n      //选择计价货币\n      this.jData.R54 = e;\n    },\n    hideRule: function hideRule() {\n      this.$emit('hideRule');\n    },\n    allowJc: function allowJc() {\n      //是否强制建仓\n      this.jData.R11 = !this.jData.R11;\n\n      if (!this.jData.R11) {\n        //没被选中\n        this.jData.R12 = 0;\n      }\n    },\n    allowSup: function allowSup() {\n      this.jData.R13 = !this.jData.R13;\n\n      if (!this.jData.R13) {\n        this.jData.R14 = 0;\n        this.jData.R15 = 0;\n        this.jData.R36 = 0;\n      }\n    },\n    allowPc: function allowPc() {\n      //允许-平仓\n      this.jData.R16 = !this.jData.R16;\n\n      if (!this.jData.R16) {\n        this.jData.R17 = 0;\n        this.jData.R18 = 0;\n      }\n    },\n    allowQtBc: function allowQtBc() {\n      //其他规则-启用补仓\n      this.jData.R26 = !this.jData.R26;\n\n      if (!this.jData.R26) {\n        this.jData.R27 = 0;\n        this.jData.R28 = 0;\n        this.jData.R29 = 0;\n        this.jData.R30 = 0;\n      }\n    },\n    allowQtZs: function allowQtZs() {\n      //其他规则-启用止损\n      this.jData.R21 = !this.jData.R21;\n\n      if (!this.jData.R21) {\n        this.jData.R22 = 0;\n        this.jData.R23 = 0;\n        this.jData.R24 = 0;\n        this.jData.R25 = 0;\n      }\n    },\n    allowQtJc: function allowQtJc() {\n      //其他规则-启用建仓\n      this.jData.R31 = !this.jData.R31;\n\n      if (!this.jData.R31) {\n        this.jData.R32 = 0;\n        this.jData.R33 = 0;\n        this.jData.R34 = 0;\n        this.jData.R35 = 0;\n      }\n    },\n    unescapeF: function unescapeF(str) {\n      //unicode=>文字\n      return unescape(str.replace(/\\\\/g, \"%\"));\n    },\n    charToUnicode: function charToUnicode(str) {\n      var res = [];\n\n      for (var i = 0; i < str.length; i++) {\n        res[i] = (\"00\" + str.charCodeAt(i).toString(16)).slice(-4);\n      }\n\n      return \"%u\" + res.join(\"%u\");\n    },\n    beforePostRule: function beforePostRule() {\n      //提交前整理\n      var title = this.ruleName.replace(/\\s+/g, '');\n      var _ref2 = [this.curcy, this.charToUnicode(title), this.jData.R11 ? 1 : 0, this.jData.R13 ? 1 : 0, this.jData.R19 ? 1 : 0, this.jData.R16 ? 1 : 0, this.jData.R20 ? 1 : 0, this.jData.R21 ? 1 : 0, this.jData.R26 ? 1 : 0, this.jData.R31 ? 1 : 0],\n          R54 = _ref2[0],\n          R0 = _ref2[1],\n          R11 = _ref2[2],\n          R13 = _ref2[3],\n          R19 = _ref2[4],\n          R16 = _ref2[5],\n          R20 = _ref2[6];\n\n      var list = _objectSpread({}, this.jData, {\n        R54: R54,\n        R0: R0,\n        R11: R11,\n        R13: R13,\n        R19: R19,\n        R16: R16,\n        R20: R20\n      });\n\n      for (var i in list) {\n        //数字转成了字符\n        if (typeof list[i] == 'number') {\n          list[i] = list[i].toString();\n        }\n      }\n\n      return {\n        list: list,\n        title: title\n      };\n    },\n    ruleAction: function ruleAction(obj) {\n      var _this = this;\n\n      //父组件是Rule时执行\n      var url = this.edit ? '/EasWebUser/changeRule' : '/EasWebUser/addRule';\n      $ax.getAjaxData(url, obj, function (res) {\n        _this.changeLay(false);\n\n        if (res.code == 1) {\n          var msg = {\n            state: true,\n            errorText: {\n              type: 'success',\n              text: _this.edit ? '编辑成功' : '添加成功'\n            }\n          };\n\n          _this.changeSnack(msg);\n\n          var state = _this.$sock.lookState();\n\n          state == -1 ? _this.$sock.initWebSocket() : _this.wssSave();\n          sessionStorage.removeItem('collocation'); //清空缓存里的rule/api\n\n          Object.assign(_this.$data, _this.$options.data());\n\n          _this.hideRule();\n        }\n      }, {\n        hasToken: true\n      });\n    },\n    demAction: function demAction(obj) {\n      //父组件是Dem时执行\n      var json = JSON.stringify({\n        code: 1008,\n        data: [{\n          id: obj.id,\n          data: obj.data\n        }]\n      });\n      this.$sock.websocketsend(json);\n      Object.assign(this.$data, this.$options.data());\n      this.hideRule();\n    },\n    postRule: function postRule() {\n      //提交规则\n      var before = this.beforePostRule();\n      var obj = {\n        name: before.title,\n        data: Utils.encrypt(JSON.stringify(before.list))\n      };\n      this.edit ? obj.id = before.list.id : '';\n      this.parentName == 'Rule' ? this.ruleAction(obj) : this.demAction(obj);\n    }\n  })\n};",{"version":3,"sources":["F:\\work\\lhds\\src\\mixins\\addRuleData.js"],"names":["mapActions","Utils","addRuleData","props","ruleObj","type","Object","default","edit","Boolean","parentName","String","watch","handler","immediate","data","rules","required","v","length","isEmpty","test","size","percent","not","valid","ruleName","jData","R1","R3","R2","R54","R11","R12","R13","R14","R15","R36","R7","R10","R9","R8","R19","R20","R4","R5","R6","R16","R17","R18","R26","R27","R28","R29","R30","R21","R22","R23","R24","R25","R31","R32","R33","R34","R35","activeRule","curcy","currency","id","value","child","methods","wssSave","json","JSON","stringify","code","$sock","websocketsend","listenState","name","validateData","$refs","form","validate","resetValidation","changeSnack","state","errorText","text","transPropsData","item","Number","R0","unescapeF","assign","selectCurrency","e","hideRule","$emit","allowJc","allowSup","allowPc","allowQtBc","allowQtZs","allowQtJc","str","unescape","replace","charToUnicode","res","i","charCodeAt","toString","slice","join","beforePostRule","title","list","ruleAction","obj","url","$ax","getAjaxData","changeLay","msg","lookState","initWebSocket","sessionStorage","removeItem","$data","$options","hasToken","demAction","postRule","before","encrypt"],"mappings":"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","sourcesContent":["\timport {\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\timport Utils from '@/plugins/cryAes.js'\r\n\texport const addRuleData = {\r\n\t\tprops: {\r\n\t\t\truleObj: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({})\r\n\t\t\t},\r\n\t\t\tedit: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tparentName: {//父组件的名字\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:'Rule'\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\twatch: {\r\n\t\t\tedit: {\r\n\t\t\t\thandler: 'transPropsData',\r\n\t\t\t\timmediate: true\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\trules: {\r\n\t\t\t\t\trequired: v => !!v || '必填',\r\n\t\t\t\t\tlength: v => (v && v.length <= 68) || '超出长度',\r\n\t\t\t\t\tisEmpty: v => /\\S/.test(v) || '不可为空',\r\n\t\t\t\t\tsize: v => v > 0 || '必须大于0',\r\n\t\t\t\t\tpercent:v => v <= 100 || '不可超出100',\r\n\t\t\t\t\tnot: v => !/[\\u4E00-\\u9FA5]/g.test(v) || '不能是中文'\r\n\t\t\t\t},\r\n\t\t\t\tvalid: true,\r\n\t\t\t\truleName: '', //规则名称\r\n\t\t\t\tjData: { //建仓\r\n\t\t\t\t\tR1: 0, //买入跌幅\r\n\t\t\t\t\tR3: 1, //单次买入金额\r\n\t\t\t\t\tR2: 0, //跌幅回调\r\n\t\t\t\t\tR54: null, //计价货币\r\n\t\t\t\t\tR11: false, //允许强制建仓\r\n\t\t\t\t\tR12: 0, //强制建仓\r\n\t\t\t\t\tR13: false, //允许\r\n\t\t\t\t\tR14: 1, //分钟内上涨\r\n\t\t\t\t\tR15: 0, //追涨建仓\r\n\t\t\t\t\tR36: 1, //防插针\r\n\t\t\t\t\r\n\t\t\t\t\tR7: 0, //单次补仓跌幅\r\n\t\t\t\t\tR10: 0, //补仓回调\r\n\t\t\t\t\tR9: 0, //单次补仓金额\r\n\t\t\t\t\tR8: 0, //补仓\r\n\t\t\t\t\tR19: false, //补仓单独卖出\r\n\t\t\t\t\tR20: false, //补单可进行补仓\r\n\t\t\t\t\r\n\t\t\t\t\tR4: 0, //卖出涨幅\r\n\t\t\t\t\tR5: 0, //涨幅回调\r\n\t\t\t\t\tR6: 0, //止损跌幅\r\n\t\t\t\t\tR16: false, //允许分钟内下跌\r\n\t\t\t\t\tR17: 0, //分钟内下跌\r\n\t\t\t\t\tR18: 0, //杀跌平仓\r\n\t\t\t\t\r\n\t\t\t\t\tR26: false, //允许补仓\r\n\t\t\t\t\tR27: 0, //分钟内下跌\r\n\t\t\t\t\tR28: 0, //时\r\n\t\t\t\t\tR29: 0, //补仓比例更改为\r\n\t\t\t\t\tR30: 0, //分钟后回复数值\r\n\t\t\t\t\tR21: false, //允许止损\r\n\t\t\t\t\tR22: 0,\r\n\t\t\t\t\tR23: 0,\r\n\t\t\t\t\tR24: 0,\r\n\t\t\t\t\tR25: 0,\r\n\t\t\t\t\tR31: false, //允许建仓\r\n\t\t\t\t\tR32: 0,\r\n\t\t\t\t\tR33: 0,\r\n\t\t\t\t\tR34: 0,\r\n\t\t\t\t\tR35: 0\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tactiveRule: 0,\r\n\t\t\t\t\r\n\t\t\t\tcurcy: 1, //当前的R54(货币)\r\n\t\t\t\t\r\n\t\t\t\tcurrency: [{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tvalue: 'USDT'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tvalue: 'ETH'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tvalue: 'BTC'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\t\r\n\t\t\t\tchild: ['建仓规则', '平仓规则', '补仓规则', '其他规则'],\r\n\t\t\t\t\r\n\t\t\t\ttype: 0\r\n\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['changeLay', 'changeSnack']),\r\n\t\t\t\r\n\t\t\twssSave() {//传递数据给ws\r\n\t\t\t\tlet json = JSON.stringify({\r\n\t\t\t\t\tcode: 1006\r\n\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\tthis.$sock.websocketsend(json);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tlistenState(name) {\r\n\t\t\t\tthis.jData.R19 = name;\r\n\t\t\t\tname == true ? '' : this.jData.R20 = false;\r\n\t\t\t},\r\n\t\t\r\n\t\t\tvalidateData() { //点击下一步的时候验证\r\n\t\t\t\tif (this.$refs.form.validate()) {\r\n\t\t\t\t\tthis.activeRule++;\r\n\t\t\t\t\tthis.$refs.form.resetValidation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.changeSnack({\r\n\t\t\t\t\t\tstate:true,\r\n\t\t\t\t\t\terrorText: {\r\n\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\ttext: '表单填写错误'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\ttransPropsData() { //编辑初始化对数据进行转换\r\n\t\t\t\tif (this.edit) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet item = {...this.ruleObj};\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.curcy = Number(item.R54);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.ruleName = item.R0 ? this.unescapeF(item.R0) : '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet [R11,R13,R19,R16,R20,R21,R26,R31] = [\r\n\t\t\t\t\t\titem.R11 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R13 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R19 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R16 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R20 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R21 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R26 == 1 ? true : false,\r\n\t\t\t\t\t\titem.R31 == 1 ? true : false\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\tthis.jData = Object.assign({}, item, {R11,R13,R19,R16,R20,R21,R26,R31});\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t},\r\n\t\t\r\n\t\t\tselectCurrency(e) { //选择计价货币\r\n\t\t\t\tthis.jData.R54 = e;\r\n\t\t\t},\r\n\r\n\t\t\thideRule() {\r\n\t\t\t\tthis.$emit('hideRule');\r\n\t\t\t},\r\n\t\t\tallowJc() { //是否强制建仓\r\n\t\t\r\n\t\t\t\tthis.jData.R11 = !this.jData.R11;\r\n\t\t\t\tif (!this.jData.R11) { //没被选中\r\n\t\t\t\t\tthis.jData.R12 = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\tallowSup() {\r\n\t\t\t\tthis.jData.R13 = !this.jData.R13;\r\n\t\t\t\tif (!this.jData.R13) {\r\n\t\t\t\t\tthis.jData.R14 = 0;\r\n\t\t\t\t\tthis.jData.R15 = 0;\r\n\t\t\t\t\tthis.jData.R36 = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\tallowPc() { //允许-平仓\r\n\t\t\t\tthis.jData.R16 = !this.jData.R16;\r\n\t\t\t\tif (!this.jData.R16) {\r\n\t\t\t\t\tthis.jData.R17 = 0;\r\n\t\t\t\t\tthis.jData.R18 = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\tallowQtBc() { //其他规则-启用补仓\r\n\t\t\r\n\t\t\t\tthis.jData.R26 = !this.jData.R26;\r\n\t\t\t\tif (!this.jData.R26) {\r\n\t\t\t\t\tthis.jData.R27 = 0;\r\n\t\t\t\t\tthis.jData.R28 = 0;\r\n\t\t\t\t\tthis.jData.R29 = 0;\r\n\t\t\t\t\tthis.jData.R30 = 0;\r\n\t\t\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t},\r\n\t\t\r\n\t\t\tallowQtZs() { //其他规则-启用止损\r\n\t\t\t\tthis.jData.R21 = !this.jData.R21;\r\n\t\t\t\tif (!this.jData.R21) {\r\n\t\t\t\t\tthis.jData.R22 = 0;\r\n\t\t\t\t\tthis.jData.R23 = 0;\r\n\t\t\t\t\tthis.jData.R24 = 0;\r\n\t\t\t\t\tthis.jData.R25 = 0;\r\n\t\t\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t},\r\n\t\t\r\n\t\t\tallowQtJc() { //其他规则-启用建仓\r\n\t\t\t\tthis.jData.R31 = !this.jData.R31;\r\n\t\t\t\tif (!this.jData.R31) {\r\n\t\t\t\t\tthis.jData.R32 = 0;\r\n\t\t\t\t\tthis.jData.R33 = 0;\r\n\t\t\t\t\tthis.jData.R34 = 0;\r\n\t\t\t\t\tthis.jData.R35 = 0;\r\n\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\r\n\t\t\tunescapeF(str) { //unicode=>文字\r\n\t\t\t\treturn unescape(str.replace(/\\\\/g, \"%\"))\r\n\t\t\t},\r\n\t\t\r\n\t\t\r\n\t\t\tcharToUnicode(str) {\r\n\t\t\t\tlet res = [];\r\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\t\t\t\t\tres[i] = (\"00\" + str.charCodeAt(i).toString(16)).slice(-4);\r\n\t\t\t\t}\r\n\t\t\t\treturn \"%u\" + res.join(\"%u\");\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tbeforePostRule(){//提交前整理\r\n\t\t\t\tlet title = this.ruleName.replace(/\\s+/g,'');\r\n\t\t\t\t\r\n\t\t\t\tlet [R54,R0,R11,R13,R19,R16,R20] = [\r\n\t\t\t\t\tthis.curcy,\r\n\t\t\t\t\tthis.charToUnicode(title),\r\n\t\t\t\t\tthis.jData.R11 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R13 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R19 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R16 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R20 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R21 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R26 ? 1 : 0,\r\n\t\t\t\t\tthis.jData.R31 ? 1 : 0\r\n\t\t\t\t];\r\n\t\t\t\tlet list = {\r\n\t\t\t\t\t...this.jData,\r\n\t\t\t\t\tR54,R0,R11,R13,R19,R16,R20\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tfor (let i in list) { //数字转成了字符\r\n\t\t\t\t\tif (typeof(list[i]) == 'number') {\r\n\t\t\t\t\t\tlist[i] = list[i].toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn {list , title};\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\truleAction(obj){//父组件是Rule时执行\r\n\t\t\t\tlet url = this.edit ? '/EasWebUser/changeRule' : '/EasWebUser/addRule';\r\n\t\t\t\t\r\n\t\t\t\t$ax.getAjaxData(url, obj, (res) => {\r\n\t\t\t\t\tthis.changeLay(false);\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\tstate: true,\r\n\t\t\t\t\t\t\terrorText: {\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\ttext: this.edit ? '编辑成功' : '添加成功'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.changeSnack(msg);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tlet state = this.$sock.lookState();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tstate == -1 ? this.$sock.initWebSocket() : this.wssSave();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tsessionStorage.removeItem('collocation'); //清空缓存里的rule/api\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tObject.assign(this.$data, this.$options.data());\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.hideRule();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\thasToken: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tdemAction(obj){//父组件是Dem时执行\r\n\t\t\t\tlet json = JSON.stringify({\r\n\t\t\t\t\tcode: 1008,\r\n\t\t\t\t\tdata:[{\r\n\t\t\t\t\t\tid:obj.id,\r\n\t\t\t\t\t\tdata:obj.data\r\n\t\t\t\t\t}]\r\n\t\t\t\t});\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.$sock.websocketsend(json);\r\n\t\t\t\t\r\n\t\t\t\tObject.assign(this.$data, this.$options.data());\r\n\t\t\t\t\r\n\t\t\t\tthis.hideRule();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tpostRule() { //提交规则\r\n\t\t\t\t\r\n\t\t\t\tlet before = this.beforePostRule();\r\n\t\t\t\t\t\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tname: before.title,\r\n\t\t\t\t\tdata: Utils.encrypt(JSON.stringify(before.list))\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tthis.edit ? obj.id = before.list.id : '';\r\n\t\t\t\t\r\n\t\t\t\tthis.parentName == 'Rule'?this.ruleAction(obj):this.demAction(obj);\r\n\t\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\r\n\t}"]}]}