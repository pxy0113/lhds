{"remainingRequest":"F:\\work\\vuefityDemo\\node_modules\\thread-loader\\dist\\cjs.js!F:\\work\\vuefityDemo\\node_modules\\babel-loader\\lib\\index.js!F:\\work\\vuefityDemo\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\work\\vuefityDemo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\work\\vuefityDemo\\src\\views\\Rule.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\work\\vuefityDemo\\src\\views\\Rule.vue","mtime":1571628037530},{"path":"F:\\work\\vuefityDemo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\vuefityDemo\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\vuefityDemo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\vuefityDemo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\vuefityDemo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"F:\\\\work\\\\vuefityDemo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _defineProperty from \"F:\\\\work\\\\vuefityDemo\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport upSvg from '@/img/up.svg';\nimport Utils from '@/plugins/cryAes.js';\nimport addRule from '@/components/addRule.vue';\nimport { mapActions } from 'vuex';\nexport default {\n  compoments: {\n    addRule: addRule\n  },\n  data: function data() {\n    return {\n      transition: 'scale-transition',\n      loading: true,\n      //控制骨架屏 true表示显示\n      upIcon: upSvg,\n      editType: false,\n      //新增\n      step: 1,\n      target: '#vRow',\n      options: {\n        duration: 1000,\n        offset: 0,\n        easing: 'easeInOutCubic'\n      },\n      curPage: {\n        page: 1,\n        size: 0\n      },\n      currentRule: {},\n      //当前的规则\n      showAddRule: false,\n      ruleList: []\n    };\n  },\n  watch: {\n    wssData: {\n      handler: function handler(nV, oV) {\n        this.getMessage();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    wssData: function wssData() {\n      //wss传递的消息\n      return this.$store.state.collocationList;\n    }\n  },\n  methods: _objectSpread({}, mapActions(['changeLay', 'changeSnack']), {\n    changeTime: function changeTime(time) {\n      return this.$utils.timestampToTime(Number(time));\n    },\n    newRule: function newRule() {\n      this.showAddRule = true;\n      this.editType = false;\n    },\n    getMessage: function getMessage() {\n      //wss传递的消息\n      var result = this.wssData;\n\n      switch (result.code) {\n        case 20013:\n          //客户端在线\n          var json = JSON.stringify({\n            code: 1006\n          });\n          this.$sock.websocketsend(json);\n          break;\n\n        default:\n          break;\n      }\n    },\n    delRule: function delRule(id, index) {\n      var _this = this;\n\n      //删除规则\n      this.$Modal.confirm({\n        title: '删除',\n        content: '<p>确定删除吗？该操作不可撤销</p>',\n        onOk: function onOk() {\n          _this.changeLay(true);\n\n          var state = _this.$sock.lookState();\n\n          $ax.getAjaxData('/EasWebUser/delRule', {\n            id: id\n          }, function (res) {\n            _this.changeLay(false);\n\n            if (res.code == 1) {\n              var msg = {\n                state: true,\n                errorText: {\n                  type: 'green',\n                  text: '删除成功'\n                }\n              };\n\n              _this.changeSnack(msg);\n\n              var json = JSON.stringify({\n                code: 1006\n              });\n              state == -1 ? _this.$sock.initWebSocket() : _this.$sock.websocketsend(json);\n              sessionStorage.removeItem('collocation'); //清空缓存里的rule/api\n\n              _this.ruleList.splice(index, 1);\n            }\n          }, {\n            hasToken: true\n          });\n        }\n      });\n    },\n    hideRule: function hideRule() {\n      //隐藏规则输入框\n      this.showAddRule = false;\n      this.getRuleList();\n    },\n    editRule: function editRule(item) {\n      //编辑规则\n      this.showAddRule = true;\n      this.editType = true;\n      this.currentRule = item;\n    },\n    inputShow: function inputShow(number) {\n      this.curPage.page = number;\n      this.$vuetify.goTo(this.target, this.options); //平滑滚动到表头\n\n      this.getRuleList();\n    },\n    unescapeF: function unescapeF(str) {\n      //unicode=>文字\n      return unescape(str.replace(/\\\\/g, \"%\"));\n    },\n    getRuleList: function getRuleList() {\n      var _this2 = this;\n\n      //规则列表\n      this.loading = true;\n      $ax.getAjaxData('/EasWebUser/getRule', {\n        code: this.code,\n        pageSize: 10,\n        pageIndex: this.curPage.page ? this.curPage.page : 0\n      }, function (res) {\n        _this2.loading = false;\n\n        if (res.code == 1) {\n          var list = res.data; //5,6\n\n          var arr = [];\n          list.forEach(function (item, index) {\n            var a = JSON.parse(Utils.decrypt(item.data));\n            a.id = item.id;\n            a.R0 = _this2.unescapeF(a.R0);\n            arr.push(a);\n          });\n          _this2.ruleList = arr;\n          _this2.curPage = {\n            page: res.pageIndex,\n            size: res.pageMaxPage\n          };\n          _this2.step = 1;\n        }\n      }, {\n        hasToken: true\n      });\n    }\n  }),\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    //在组件创建之前调用（放置页面加载时请求的Ajax）\n    _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //执行异步函数\n              next(function (vm) {\n                vm.getRuleList();\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    //路由离开前断开\n    this.$sock.close();\n    next();\n  }\n};",{"version":3,"sources":["Rule.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<v-container fluid grid-list-xl>\n\t\t<v-card v-if=\"!showAddRule\" outlined  id=\"vRow\">\n\t\t\t<div class=\" px-5 py-2 my-0 green white--text d-flex justify-space-between align-center\">\n\t\t\t\t<span style=\"font-size: 18px;\" v-once>规则列表</span>\n\t\t\t\t<v-btn small color=\"white\" outlined  @click=\"newRule\">新增规则</v-btn>\n\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<component :is=\"transition !== 'None' ? `v-${transition}` : 'div'\"  hide-on-leave>\n\t\t\t\t<v-skeleton-loader\n\t\t\t\tv-if=\"loading\"\n\t\t\t\ttype=\"article\"\n\t\t\t\t>\n\t\t\t\t</v-skeleton-loader>\n\t\t\t\t\n\t\t\t\t<div v-else>\n\t\t\t\t\t<v-list-item three-line class=\"xy-tableItem\" v-if=\"ruleList.length<1\">\n\t\t\t\t\t\t<p class=\"text-center\" style=\"width: 100%;\">暂无数据</p>\n\t\t\t\t\t</v-list-item>\n\t\t\t\t\t\n\t\t\t\t\t<v-expansion-panels v-else >\n\t\t\t\t\t    <v-expansion-panel\n\t\t\t\t\t\t class=\"ddd\"\n\t\t\t\t\t      v-for=\"(item,i) in ruleList\"\n\t\t\t\t\t      :key=\"i\"\n\t\t\t\t\t    >\n\t\t\t\t\t      <v-expansion-panel-header>\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex flex-column\">\n\t\t\t\t\t\t\t\t\t  <div class=\"my-3 d-flex justify-space-between align-center flex-wrap\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex align-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"font-weight-bold demo\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.R0}}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>/<span style=\"font-size: 12px;\">规则名称</span></div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-center align-center pr-4\">\r\n\t\t\t\t\t\t\t\t\t\t  <v-btn outlined class=\"mr-1\"  x-small color=\"error\" @click.prevent.stop=\"delRule(item.id,i)\">\r\n\t\t\t\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t\t\t\t  </v-btn>\r\n\t\t\t\t\t\t\t\t\t\t  <v-btn outlined x-small color=\"primary\" @click=\"editRule(item)\">\r\n\t\t\t\t\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t\t\t\t\t  </v-btn>\r\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t\t\t\t  <Row class=\"font-weight-regular body-2\">\n\t\t\t\t\t\t\t\t\t\t  <Col :lg=\"6\" :md=\"12\" :xs=\"24\" :sm=\"12\" class=\"py-2\">计价货币：{{item.R54==1?'USDT':item.R54==2?'ETH':'BTC'}}</Col>\n\t\t\t\t\t\t\t\t\t\t  <Col :lg=\"6\" :md=\"12\" :xs=\"24\" :sm=\"12\" class=\"py-2\">买入跌幅：{{item.R1}}% </Col>\n\t\t\t\t\t\t\t\t\t\t  <Col :lg=\"6\" :md=\"12\" :xs=\"24\" :sm=\"12\" class=\"py-2\">跌幅回调：{{item.R2}}% </Col>\n\t\t\t\t\t\t\t\t\t\t  <Col :lg=\"6\" :md=\"12\" :xs=\"24\" :sm=\"12\" class=\"py-2\">建仓金额：{{item.R3}} </Col>\n\t\t\t\t\t\t\t\t\t\t\t<!-- <Col :lg=\"6\" :md=\"12\" :xs=\"24\" :sm=\"12\" class=\"py-2\">涨幅回调:{{item.R5}} </Col> -->\n\t\t\t\t\t\t\t\t\t  </Row>\n\t\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  </v-expansion-panel-header>\n\t\t\t\t\t      <v-expansion-panel-content class=\" pt-4 \" style=\"background: #dcdee2;\">\r\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<Row style=\"font-size: 14px;\" class=\"font-weight-regular \">\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>涨幅回调</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R5}}% </span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>卖出涨幅</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R4}}%</span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>止损跌幅</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R6}}% </span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>补仓跌幅</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R7}}% </span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>补仓总额</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R8*item.R9}} </span>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col :lg=\"6\" :md=\"8\" :sm=\"12\" :xs=\"12\" class=\"d-flex flex-column pb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<span>补仓回调</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>{{item.R10}}% </span>\r\n\t\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t      </v-expansion-panel-content>\n\t\t\t\t\t    </v-expansion-panel>\n\t\t\t\t\t</v-expansion-panels>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"text-center mt-5\">\n\t\t\t\t\t\t<v-pagination color=\"green\" v-model=\"curPage.page\" :length=\"curPage.size\" v-on:input=\"inputShow\" :total-visible=\"7\"></v-pagination>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</component>\n\n\t\t\t\n\t\t\t\n\t\t</v-card>\n\t\t<v-fab-transition>\n\t\t\t<Avatar :src=\"upIcon\" \n\t\t\tv-if=\"(!showAddRule)&&(ruleList.length>=5)\"\n\t\t\tclass=\"xy-suspend\" \n\t\t\t@click.stop.native=\"$vuetify.goTo(target, options)\"\n\t\t\t>\n\t\t\t</Avatar>\n\n\t\t</v-fab-transition>\n\t\t<add-rule v-if=\"showAddRule\" @hideRule=\"hideRule\" :ruleObj=\"currentRule\" ref=\"AR\" :edit=\"editType\"></add-rule>\n\t</v-container>\n</template>\n\n<script>\n\timport upSvg from '@/img/up.svg'\n\timport Utils from '@/plugins/cryAes.js'\n\timport addRule from '@/components/addRule.vue'\n\timport {\n\t\tmapActions\n\t} from 'vuex';\n\n\texport default {\n\t\tcompoments: {\n\t\t\taddRule\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\n\t\t\t\ttransition: 'scale-transition',\n\t\t\t\t\n\t\t\t\tloading:true,//控制骨架屏 true表示显示\n\t\t\t\t\n\t\t\t\tupIcon:upSvg,\n\t\t\t\t\n\t\t\t\teditType:false,//新增\n\t\t\t\t\n\t\t\t\tstep: 1,\n\n\t\t\t\ttarget: '#vRow',\n\t\t\t\toptions: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\toffset: 0,\n\t\t\t\t\teasing: 'easeInOutCubic'\n\t\t\t\t},\n\n\t\t\t\tcurPage: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tsize: 0\n\t\t\t\t},\n\n\t\t\t\tcurrentRule: {}, //当前的规则\n\n\t\t\t\tshowAddRule: false,\n\n\t\t\t\truleList: [],\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\twssData:{\n\t\t\t\thandler(nV,oV){\n\t\t\t\t\tthis.getMessage();\n\t\t\t\t},\n\t\t\t\tdeep:true\n\t\t\t}\n\t\t},\n\t\t\n\t\tcomputed:{\n\t\t\twssData(){//wss传递的消息\n\t\t\t\treturn this.$store.state.collocationList;\n\t\t\t}\n\t\t},\r\n\t\t\n\t\tmethods: {\n\t\t\t\n\t\t\t...mapActions(['changeLay', 'changeSnack']),\n\t\t\t\n\t\t\tchangeTime(time) {\n\t\t\t\treturn this.$utils.timestampToTime(Number(time));\n\t\t\t},\n\n\t\t\tnewRule(){\n\t\t\t\tthis.showAddRule = true;\n\t\t\t\tthis.editType = false;\n\t\t\t},\n\t\t\t\n\t\t\tgetMessage(){//wss传递的消息\n\t\t\t\tlet result = this.wssData;\n\t\t\t\tswitch (result.code){\n\t\t\t\t\tcase 20013://客户端在线\n\t\t\t\t\tlet json = JSON.stringify({code:1006});\n\t\t\t\t\t\n\t\t\t\t\tthis.$sock.websocketsend(json);\n\t\t\t\t\t\tbreak;\t\n\t\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t},\n\t\t\t\n\t\t\tdelRule(id, index) { //删除规则\n\t\t\t\tthis.$Modal.confirm({\n\t\t\t\t\ttitle: '删除',\n\t\t\t\t\tcontent: '<p>确定删除吗？该操作不可撤销</p>',\n\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\tthis.changeLay(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet state = this.$sock.lookState();\n\n\t\t\t\t\t\t$ax.getAjaxData('/EasWebUser/delRule', {\n\t\t\t\t\t\t\tid: id\n\t\t\t\t\t\t}, (res) => {\n\t\t\t\t\t\t\tthis.changeLay(false);\n\t\t\t\t\t\t\tif (res.code == 1) {\n\t\t\t\t\t\t\t\tlet msg = {\n\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\terrorText: {\n\t\t\t\t\t\t\t\t\t\ttype: 'green',\n\t\t\t\t\t\t\t\t\t\ttext: '删除成功'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.changeSnack(msg);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet json = JSON.stringify({code:1006});\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tstate==-1?this.$sock.initWebSocket():this.$sock.websocketsend(json);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tsessionStorage.removeItem('collocation');//清空缓存里的rule/api\n\n\t\t\t\t\t\t\t\tthis.ruleList.splice(index, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\thasToken: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t},\n\n\t\t\thideRule() { //隐藏规则输入框\n\t\t\t\tthis.showAddRule = false;\n\t\t\t\tthis.getRuleList();\n\t\t\t},\n\n\t\t\teditRule(item) { //编辑规则\n\t\t\t\tthis.showAddRule = true;\n\t\t\t\t\t\t\t\n\t\t\t\tthis.editType = true;\n\n\t\t\t\tthis.currentRule = item;\n\t\t\t},\n\n\t\t\tinputShow(number) {\n\t\t\t\tthis.curPage.page = number;\n\t\t\t\tthis.$vuetify.goTo(this.target, this.options);//平滑滚动到表头\n\t\t\t\tthis.getRuleList();\n\t\t\t},\n\n\t\t\tunescapeF(str){//unicode=>文字\n\t\t\t\treturn unescape(str.replace(/\\\\/g, \"%\"))\n\t\t\t},\n\n\t\t\tgetRuleList() { //规则列表\n\t\t\t\tthis.loading = true;\n\n\t\t\t\t$ax.getAjaxData('/EasWebUser/getRule', {\n\t\t\t\t\tcode: this.code,\n\t\t\t\t\tpageSize: 10,\n\t\t\t\t\tpageIndex: this.curPage.page ? this.curPage.page : 0\n\t\t\t\t}, (res) => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tif (res.code == 1) {\n\t\t\t\t\t\tlet list = res.data; //5,6\n\t\t\t\t\t\tlet arr = [];\n\n\t\t\t\t\t\tlist.forEach((item, index) => {\n\t\t\t\t\t\t\tlet a = JSON.parse(Utils.decrypt(item.data));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ta.id = item.id;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ta.R0 = this.unescapeF(a.R0);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tarr.push(a);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.ruleList = arr;\n\t\t\t\t\t\tthis.curPage = {\n\t\t\t\t\t\t\tpage: res.pageIndex,\n\t\t\t\t\t\t\tsize: res.pageMaxPage\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.step = 1;\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\n\t\t\t\t}, {\n\t\t\t\t\thasToken: true\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to, from, next) { //在组件创建之前调用（放置页面加载时请求的Ajax）\n\n\t\t\t(async () => { //执行异步函数\n\n\t\t\t\tnext(vm => {\n\t\t\t\t\tvm.getRuleList();\n\t\t\t\t});\n\n\t\t\t})();\n\n\t\t},\n\t\tbeforeRouteLeave(to,from,next){//路由离开前断开\n\t\t\tthis.$sock.close();\n\n\t\t\tnext();\n\t\t},\n\t}\n</script>\n<style scoped=\"scoped\">\n\t::-webkit-input-placeholder {\n\t\t/* WebKit browsers */\n\t\tcolor: white;\n\t}\n\n\t:-moz-placeholder {\n\t\t/* Mozilla Firefox 4 to 18 */\n\t\tcolor: white;\n\t}\n\n\t::-moz-placeholder {\n\t\t/* Mozilla Firefox 19+ */\n\t\tcolor: white;\n\t}\n\n\t:-ms-input-placeholder {\n\t\t/* Internet Explorer 10+ */\n\t\tcolor: white;\n\t}\n\n</style>\n<style>\n\t.v-expansion-panel:before{\n\t\tbox-shadow:none!important;\n\t}\r\n\t.demo{\r\n\t\tmax-width: 150px;\r\n\t\toverflow: hidden;white-space: nowrap;text-overflow: ellipsis;\r\n\t}\n</style>\n"],"sourceRoot":"src/views"}]}