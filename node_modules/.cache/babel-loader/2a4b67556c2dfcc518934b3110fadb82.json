{"remainingRequest":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js!F:\\work\\lhds\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\work\\lhds\\src\\axios\\index.js","dependencies":[{"path":"F:\\work\\lhds\\src\\axios\\index.js","mtime":1574407218850},{"path":"F:\\work\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\work\\lhds\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\n// import Vue from 'vue'\n// \n// \n// import axios from 'axios'\n// \n// Vue.prototype.$http = axios\n\n/*\r\n* axios配置管理\r\n*/\nimport Vue from 'vue';\nimport axios from 'axios';\nimport router from \"../router\";\n\nvar qs = require('qs'); //axios自带qs插件\n\n\nimport { transCode } from \"../plugins/code.js\";\nimport vuex from \"../store/state.js\";\nvar vm = new Vue(); //--------------------------------------------全局设置-------------------------------\n// axios.defaults.baseURL = 'http://192.168.2.105:8080'; //配置接口基础地址\n// axios.defaults.baseURL = 'http://m252t77964.wicp.vip:20211';\n\naxios.defaults.baseURL = 'http://web.lhds.vip'; //配置接口基础地址\n\naxios.defaults.timeout = 50000; //响应超时时间\n\naxios.defaults.headers.post['Content-Type'] = 'application/json;charset=utf-8'; // axios.defaults.withCredentials = true; //允许携带cookie,实现跨域登录\t\n//-----------------在发送数据之前进行数据转换 , get不会转换,因为get走的是 parmas属性----------------------\n\naxios.defaults.transformRequest = function (_data) {\n  //第一个参数_data是接收过来的数据\n  // if(typeof(_data) == 'object'){\n  // \t\tlet formData = new FormData(); //使用formData方式发送表单 否则程序接收不到表单变量（formData可以实现文件的异步上传）\n  // \t\n  // \t\tfor(let item in _data) { //for in 遍历数据进行转换\n  // \t\n  // \t\t\tformData.append(item, _data[item]);\n  // \t\n  // \t\t}\t\t\t\n  // \t\tconsole.log('-->发送了数据:', _data);\n  // \t\n  // \t\treturn formData;\n  // }else{\n  // \treturn _data;\n  // }\n  var data = JSON.stringify(_data);\n  console.log('-->发送了数据:', data);\n  return data;\n}; //--------------------添加一个请求拦截器,每次请求都会拦截一次,但是尽量使用全局设置,方便每次使用不同的设置--------------\n\n\naxios.interceptors.request.use(function (_config) {\n  //在请求发出之前对配置进行一些操作\n  var config = _config;\n\n  if (config.hasToken) {\n    //是否携带token\n    if (sessionStorage.token) {\n      //session如果有token\n      config.headers = Object.assign(config.headers, {\n        'token': sessionStorage.token\n      });\n    }\n  } //如果想每次请求的时候更改配置, 在这里增加config配置项\n  // config.headers.token = 'RtakHgn04eKSsFCr1+RvaN+miAV/vYtG7nwtQhJJpem8eNlFRsTrnNpPXbxRLNhrXJholRU+GQd+177S0DRWhVtnPR4SanNfP1XPV9yuoX9VLLCTnunB+am1bA/UL8DB';\n\n\n  console.log('-->请求了URL(' + _config.method + '):', _config.baseURL + _config.url);\n  return config;\n}, function (_err) {\n  console.log('请求拦截器报错');\n}); //------------------------添加一个响应拦截器----------------------\n\naxios.interceptors.response.use(function (_res) {\n  //在这里对返回的数据进行处理\n  console.log('<--返回了数据', _res);\n\n  if (_res.data.code !== 1) {\n    //请求不成功，报错\n    if (_res.data.code == 20001) {\n      //用户未登录\n      sessionStorage.clear();\n      vuex.showBar = false;\n      router.replace({\n        path: '/login'\n      });\n    } else {\n      var msg = transCode(_res.data.code);\n      vuex.errorText.text = msg;\n      vuex.errorText.type = 'error';\n      vuex.snackbar = true;\n    }\n  }\n\n  return _res.data;\n}, function (_err) {\n  //处理错误\n  console.log('>>>>>>发生了ajax错误');\n  console.log('-------------------------------------------');\n\n  if (_err.response) {\n    //请求已经发出，但是服务器响应返回的状态码不在2xx的范围内\t\t\n    console.log('status:', _err.response.status);\n    console.log('statusText:', _err.response.statusText);\n  } else {\n    //一些错误是在设置请求的时候触发\t\t   \n    console.log('设置的时候触发了错误');\n  }\n\n  console.log('url:', _err.config.url);\n  console.log('method:', _err.config.method);\n  console.log('data:', _err.config.data);\n  console.log('headers:', _err.config.headers);\n  console.log('-------------------------------------------');\n  return _err;\n}); //get请求\n\nexport var getTestData = function getTestData() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var fn = arguments.length > 2 ? arguments[2] : undefined;\n  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var errorCallBack = arguments.length > 4 ? arguments[4] : undefined;\n  axios.get(url, data, config).then(function (response) {\n    fn && fn(response);\n  }).catch(function (error) {\n    vuex.showOverLay = false;\n    errorCallBack && errorCallBack(error);\n    console.log('!!!getTestData发生了错误!!!：' + error);\n  });\n};\n/**\r\n * 异步函数获取axios中的数据\r\n */\n\nexport var getAsyncAjaxData = function getAsyncAjaxData() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var errorCallBack = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(function (resolve) {\n    axios.post(url, data).then(function (response) {\n      resolve(response);\n    }).catch(function (error) {\n      errorCallBack && errorCallBack(error);\n      console.log('!!!async发生了错误!!!：' + error);\n    });\n  });\n};\n/**\r\n * axios发起单个请求\r\n * \r\n * @param {STRING} url 请求数据的路径\r\n * @param {JSON} data 需要发送的数据\r\n * @param {Function} fn 数据响应后的回调函数\r\n * @param {Object} config 修改默认配置\r\n */\n\nexport var getAjaxData = function getAjaxData() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var fn = arguments.length > 2 ? arguments[2] : undefined;\n  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var errorCallBack = arguments.length > 4 ? arguments[4] : undefined;\n  axios.post(url, data, config).then(function (response) {\n    fn && fn(response);\n  }).catch(function (error) {\n    vuex.showOverLay = false;\n    errorCallBack && errorCallBack(error);\n    console.log('!!!single发生了错误!!!：' + error);\n  });\n};\n/**\r\n * axios同时发起多个请求\r\n * \r\n * @param {Array} paramArr 多个请求参数的数组\r\n * @param {Function(返回的数据1,返回的数据2...)} fn 数据响应后的回调函数\r\n */\n\nexport var getAllAjaxData = function getAllAjaxData() {\n  var paramArr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var fn = arguments.length > 1 ? arguments[1] : undefined;\n  var newArr = [];\n  paramArr.forEach(function (item) {\n    newArr.push(axios.post(item.url || '', item.data || {}));\n  });\n  axios.all(newArr).then(axios.spread(fn)).catch(function (error) {\n    return console.log('发生了错误：' + error);\n  });\n};\n/**\r\n * axios同时发起多个请求 跟上述不同的地方在于 这里的回调不拆开 直接返回一组回调\r\n * 在响应中判断$ax.getSimult(arr, (resArr) =>{\r\n\t\t\t\tlet length = resArr.length;\r\n\t\t\t\tlet len = 0;\r\n\t\t\t\tlet errArr = [];\r\n\t\t\t\tresArr.forEach((res,i) =>{\r\n\t\t\t\t\tif(res.code == 0){\r\n\t\t\t\t\t\tlen++;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\terrArr.push(res.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(len == length){\r\n\t\t\t\t\tthis.$Message.success('修改成功！');\r\n * \r\n * @param {Array} paramArr 多个请求参数的数组\r\n * @param {Function(返回的数据1,返回的数据2...)} fn 数据响应后的回调函数\r\n */\n\nexport var getSimult = function getSimult() {\n  var paramArr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var fn = arguments.length > 1 ? arguments[1] : undefined;\n  var newArr = [];\n  paramArr.forEach(function (item) {\n    newArr.push(axios.post(item.url || '', item.data || {}));\n  });\n  axios.all(newArr).then(fn).catch(function (error) {\n    return console.log('发生了错误：' + error);\n  });\n}; //使用qs插件序列化数据\n\nexport var QSStringify = function QSStringify() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var str = '{' + qs.stringify(params, {\n    encoder: function encoder(str) {\n      if (typeof str === 'string' && typeof str !== 'number') {\n        return '\"' + str + '\"';\n      } else {\n        return str;\n      }\n    }\n  }) + '}';\n  var jsonStr = str.replace(/\\=/g, ':').replace(/\\&/g, ',');\n  var jsonData = JSON.parse(jsonStr);\n  return jsonData;\n}; //使用qs插件的Ajax提交数据\n\nexport var getAjaxQsStringify = function getAjaxQsStringify() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var fn = arguments.length > 2 ? arguments[2] : undefined;\n  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var errorCallBack = arguments.length > 4 ? arguments[4] : undefined;\n  axios.post(url, QSStringify(data), config).then(function (response) {\n    fn && fn(response);\n  }).catch(function (error) {\n    errorCallBack && errorCallBack(error);\n    console.log('!!!发生了错误!!!：' + error);\n  });\n};",{"version":3,"sources":["F:\\work\\lhds\\src\\axios\\index.js"],"names":["Vue","axios","router","qs","require","transCode","vuex","vm","defaults","baseURL","timeout","headers","post","transformRequest","_data","data","JSON","stringify","console","log","interceptors","request","use","_config","config","hasToken","sessionStorage","token","Object","assign","method","url","_err","response","_res","code","clear","showBar","replace","path","msg","errorText","text","type","snackbar","status","statusText","getTestData","fn","errorCallBack","get","then","catch","error","showOverLay","getAsyncAjaxData","Promise","resolve","getAjaxData","getAllAjaxData","paramArr","newArr","forEach","item","push","all","spread","getSimult","QSStringify","params","str","encoder","jsonStr","jsonData","parse","getAjaxQsStringify"],"mappings":"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","sourcesContent":["// import Vue from 'vue'\r\n// \r\n// \r\n// import axios from 'axios'\r\n// \r\n// Vue.prototype.$http = axios\r\n /*\r\n * axios配置管理\r\n */\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios';\r\nimport router from '../router'\r\nconst qs = require('qs');//axios自带qs插件\r\nimport {transCode} from '../plugins/code.js'\r\nimport vuex from '../store/state.js'\r\nconst vm = new Vue();\r\n\r\n//--------------------------------------------全局设置-------------------------------\r\n\r\n// axios.defaults.baseURL = 'http://192.168.2.105:8080'; //配置接口基础地址\r\n// axios.defaults.baseURL = 'http://m252t77964.wicp.vip:20211';\r\naxios.defaults.baseURL = 'http://web.lhds.vip'; //配置接口基础地址\r\naxios.defaults.timeout = 50000; //响应超时时间\r\n\r\naxios.defaults.headers.post['Content-Type'] = 'application/json;charset=utf-8';\r\n\r\n\r\n// axios.defaults.withCredentials = true; //允许携带cookie,实现跨域登录\t\r\n\r\n//-----------------在发送数据之前进行数据转换 , get不会转换,因为get走的是 parmas属性----------------------\r\n\r\naxios.defaults.transformRequest = (_data) => { //第一个参数_data是接收过来的数据\r\n\t// if(typeof(_data) == 'object'){\r\n\t// \t\tlet formData = new FormData(); //使用formData方式发送表单 否则程序接收不到表单变量（formData可以实现文件的异步上传）\r\n\t// \t\r\n\t// \t\tfor(let item in _data) { //for in 遍历数据进行转换\r\n\t// \t\r\n\t// \t\t\tformData.append(item, _data[item]);\r\n\t// \t\r\n\t// \t\t}\t\t\t\r\n\t// \t\tconsole.log('-->发送了数据:', _data);\r\n\t// \t\r\n\t// \t\treturn formData;\r\n\t// }else{\r\n\t// \treturn _data;\r\n\t// }\r\n\t\r\n\t\tlet data = JSON.stringify(_data);\r\n\t\tconsole.log('-->发送了数据:', data);\r\n\t\treturn data;\r\n\t\r\n};\r\n\r\n\r\n\r\n//--------------------添加一个请求拦截器,每次请求都会拦截一次,但是尽量使用全局设置,方便每次使用不同的设置--------------\r\n\r\naxios.interceptors.request.use(\r\n\t\r\n\t_config => { //在请求发出之前对配置进行一些操作\r\n\r\n\t\tlet config = _config;\r\n\r\n\t\tif(config.hasToken){ //是否携带token\r\n\t\t\tif(sessionStorage.token){//session如果有token\r\n\t\t\t\tconfig.headers = Object.assign(config.headers,{'token':sessionStorage.token});\r\n\t\t\t}\r\n\t\t}\r\n\t\t//如果想每次请求的时候更改配置, 在这里增加config配置项\r\n\t\t// config.headers.token = 'RtakHgn04eKSsFCr1+RvaN+miAV/vYtG7nwtQhJJpem8eNlFRsTrnNpPXbxRLNhrXJholRU+GQd+177S0DRWhVtnPR4SanNfP1XPV9yuoX9VLLCTnunB+am1bA/UL8DB';\r\n\t\t\r\n\t\t\r\n\t\tconsole.log('-->请求了URL(' + _config.method + '):', _config.baseURL + _config.url);\r\n\t\r\n\t\treturn config;\r\n\r\n\t},\r\n\t\r\n\t_err => {\r\n\t\tconsole.log('请求拦截器报错');\r\n\t}\r\n\t\r\n);\r\n\r\n//------------------------添加一个响应拦截器----------------------\r\n\t\t\t\r\naxios.interceptors.response.use(\r\n\r\n\t_res => { //在这里对返回的数据进行处理\r\n\t\t\t\r\n\t\tconsole.log('<--返回了数据', _res);\r\n\t\t\r\n\t\tif(_res.data.code!==1){//请求不成功，报错\r\n\t\t\tif(_res.data.code ==20001){ //用户未登录\r\n\t\t\t\tsessionStorage.clear();\r\n\t\t\t\tvuex.showBar = false;\r\n\t\t\t\trouter.replace({path:'/login'});\r\n\t\t\t}else{\r\n\t\t\t\tlet msg = transCode(_res.data.code);\r\n\t\t\t\tvuex.errorText.text = msg; \r\n\t\t\t\tvuex.errorText.type = 'error';\r\n\t\t\t\tvuex.snackbar = true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn _res.data;\r\n\r\n\t},\r\n\t_err => { //处理错误\r\n\r\n\t\tconsole.log('>>>>>>发生了ajax错误');\r\n\r\n\t\tconsole.log('-------------------------------------------');\r\n\r\n\t\tif(_err.response) { //请求已经发出，但是服务器响应返回的状态码不在2xx的范围内\t\t\r\n\t\t\tconsole.log('status:', _err.response.status);\r\n\r\n\t\t\tconsole.log('statusText:', _err.response.statusText);\r\n\r\n\t\t} else { //一些错误是在设置请求的时候触发\t\t   \r\n\t\t\tconsole.log('设置的时候触发了错误');\r\n\t\t}\r\n\r\n\t\tconsole.log('url:', _err.config.url);\r\n\r\n\t\tconsole.log('method:', _err.config.method);\r\n\r\n\t\tconsole.log('data:', _err.config.data);\r\n\r\n\t\tconsole.log('headers:', _err.config.headers);\r\n\r\n\t\tconsole.log('-------------------------------------------');\r\n\r\n\t\treturn _err;\r\n\t}\r\n);\r\n\r\n//get请求\r\nexport const getTestData = (url = '', data = {}, fn, config = {}, errorCallBack) => {\r\n\taxios.get(url, data, config).then(response => {\r\n\t\tfn && fn(response);\r\n\t}).catch(error => {\r\n\t\tvuex.showOverLay = false;\r\n\t\terrorCallBack && errorCallBack(error);\r\n\t\tconsole.log('!!!getTestData发生了错误!!!：' + error);\r\n\t});\r\n}\r\n\r\n/**\r\n * 异步函数获取axios中的数据\r\n */\r\nexport const getAsyncAjaxData = (url = '', data = {}, errorCallBack) => {\r\n\treturn new Promise(resolve => {\r\n\t\taxios.post(url, data).then(response => {\r\n\t\t\tresolve(response);\r\n\t\t}).catch(error => {\r\n\t\t\terrorCallBack && errorCallBack(error);\r\n\t\t\tconsole.log('!!!async发生了错误!!!：' + error);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n/**\r\n * axios发起单个请求\r\n * \r\n * @param {STRING} url 请求数据的路径\r\n * @param {JSON} data 需要发送的数据\r\n * @param {Function} fn 数据响应后的回调函数\r\n * @param {Object} config 修改默认配置\r\n */\r\nexport const getAjaxData = (url = '', data = {}, fn, config = {}, errorCallBack) => {\r\n\taxios.post(url, data, config).then(response => {\r\n\t\tfn && fn(response);\r\n\t}).catch(error => {\r\n\t\tvuex.showOverLay = false;\r\n\t\terrorCallBack && errorCallBack(error);\r\n\t\tconsole.log('!!!single发生了错误!!!：' + error);\r\n\t});\r\n}\r\n\r\n/**\r\n * axios同时发起多个请求\r\n * \r\n * @param {Array} paramArr 多个请求参数的数组\r\n * @param {Function(返回的数据1,返回的数据2...)} fn 数据响应后的回调函数\r\n */\r\nexport const getAllAjaxData = (paramArr = [], fn) => {\r\n\tlet newArr = [];\r\n\tparamArr.forEach(item => {\r\n\t\tnewArr.push(axios.post(item.url || '',item.data || {}));\r\n\t});\r\n\taxios.all(newArr).then(axios.spread(fn)).catch(error => console.log('发生了错误：'+error));\r\n}\r\n/**\r\n * axios同时发起多个请求 跟上述不同的地方在于 这里的回调不拆开 直接返回一组回调\r\n * 在响应中判断$ax.getSimult(arr, (resArr) =>{\r\n\t\t\t\tlet length = resArr.length;\r\n\t\t\t\tlet len = 0;\r\n\t\t\t\tlet errArr = [];\r\n\t\t\t\tresArr.forEach((res,i) =>{\r\n\t\t\t\t\tif(res.code == 0){\r\n\t\t\t\t\t\tlen++;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\terrArr.push(res.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(len == length){\r\n\t\t\t\t\tthis.$Message.success('修改成功！');\r\n * \r\n * @param {Array} paramArr 多个请求参数的数组\r\n * @param {Function(返回的数据1,返回的数据2...)} fn 数据响应后的回调函数\r\n */\r\nexport const getSimult = (paramArr = [], fn) => {\r\n\tlet newArr = [];\r\n\tparamArr.forEach(item => {\r\n\t\tnewArr.push(axios.post(item.url || '',item.data || {}));\r\n\t});\r\n\taxios.all(newArr).then(fn).catch(error => console.log('发生了错误：'+error));\r\n}\r\n//使用qs插件序列化数据\r\nexport const QSStringify = (params={}) => {\r\n\tlet str = '{'+qs.stringify(params, {encoder: function(str){\r\n\t\tif(typeof(str) === 'string' && typeof(str) !== 'number'){\r\n\t\t\treturn '\"'+ str +'\"'\r\n\t\t}else{\r\n\t\t\treturn str\r\n\t\t}\r\n\t}})+'}';\r\n\tlet jsonStr = str.replace(/\\=/g, ':').replace(/\\&/g, ',');\r\n  \tlet jsonData = JSON.parse(jsonStr);\r\n  \treturn jsonData;\r\n}\r\n\r\n//使用qs插件的Ajax提交数据\r\nexport const getAjaxQsStringify = (url = '', data = {}, fn, config = {}, errorCallBack) => {\r\n\taxios.post(url, QSStringify(data), config).then(response => {\r\n\t\tfn && fn(response);\r\n\t}).catch(error => {\r\n\t\terrorCallBack && errorCallBack(error);\r\n\t\tconsole.log('!!!发生了错误!!!：' + error);\r\n\t});\r\n}"]}]}