{"remainingRequest":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\mixins\\ruleData.js","dependencies":[{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\mixins\\ruleData.js","mtime":1574651315641},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1572955172692},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\babel-loader\\lib\\index.js","mtime":1572955171173},{"path":"C:\\Users\\pxy\\Downloads\\test\\lhds\\node_modules\\eslint-loader\\index.js","mtime":1572955195504}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\pxy\\\\Downloads\\\\test\\\\lhds\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _defineProperty from \"C:\\\\Users\\\\pxy\\\\Downloads\\\\test\\\\lhds\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport upSvg from '@/img/up.svg';\nimport Utils from '@/plugins/cryAes.js';\nimport { mapActions } from 'vuex';\nexport var ruleData = {\n  data: function data() {\n    return {\n      transition: 'fade-transition',\n      loading: true,\n      //控制骨架屏 true表示显示\n      upIcon: upSvg,\n      editType: false,\n      //新增\n      step: 1,\n      target: '#vRow',\n      options: {\n        duration: 1000,\n        offset: 0,\n        easing: 'easeInOutCubic'\n      },\n      curPage: {\n        page: 1,\n        size: 0\n      },\n      currentRule: {},\n      //当前的规则\n      showAddRule: false,\n      ruleList: []\n    };\n  },\n  watch: {\n    wssData: {\n      handler: function handler(nV, oV) {\n        this.getMessage();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    wssData: function wssData() {\n      //wss传递的消息\n      return this.$store.state.collocationList;\n    }\n  },\n  methods: _objectSpread({}, mapActions(['changeLay', 'changeSnack']), {\n    changeTime: function changeTime(time) {\n      return this.$utils.timestampToTime(Number(time));\n    },\n    newRule: function newRule() {\n      this.showAddRule = true;\n      this.editType = false;\n    },\n    getMessage: function getMessage() {\n      //wss传递的消息\n      var result = this.wssData;\n\n      switch (result.code) {\n        case 20013:\n          //客户端在线\n          var json = JSON.stringify({\n            code: 1006\n          });\n          this.$sock.websocketsend(json);\n          break;\n\n        default:\n          break;\n      }\n    },\n    delRule: function delRule(id, index) {\n      var _this = this;\n\n      //删除规则\n      this.$xyDialog({\n        title: '删除规则',\n        content: '确定删除吗? 该操作不可撤销',\n        onOk: function onOk() {\n          _this.changeLay(true);\n\n          var state = _this.$sock.lookState();\n\n          $ax.getAjaxData('/EasWebUser/delRule', {\n            id: id\n          }, function (res) {\n            _this.changeLay(false);\n\n            if (res.code == 1) {\n              var msg = {\n                state: true,\n                errorText: {\n                  type: 'success',\n                  text: '删除成功'\n                }\n              };\n\n              _this.changeSnack(msg);\n\n              var json = JSON.stringify({\n                code: 1006\n              });\n              state == -1 ? _this.$sock.initWebSocket() : _this.$sock.websocketsend(json);\n              sessionStorage.removeItem('collocation'); //清空缓存里的rule/api\n\n              _this.ruleList.splice(index, 1);\n            }\n          }, {\n            hasToken: true\n          });\n        }\n      });\n    },\n    hideRule: function hideRule() {\n      //隐藏规则输入框\n      this.showAddRule = false;\n      this.getRuleList();\n    },\n    editRule: function editRule(item) {\n      //编辑规则\n      this.showAddRule = true;\n      this.editType = true;\n      this.currentRule = item;\n    },\n    inputShow: function inputShow(number) {\n      this.curPage.page = number;\n      this.$vuetify.goTo(this.target, this.options); //平滑滚动到表头\n\n      this.getRuleList();\n    },\n    unescapeF: function unescapeF(str) {\n      //unicode=>文字\n      return unescape(str.replace(/\\\\/g, \"%\"));\n    },\n    getRuleList: function getRuleList() {\n      var _this2 = this;\n\n      //规则列表\n      this.loading = true;\n      $ax.getAjaxData('/EasWebUser/getRule', {\n        code: this.code,\n        pageSize: 10,\n        pageIndex: this.curPage.page ? this.curPage.page : 0\n      }, function (res) {\n        _this2.loading = false;\n\n        if (res.code == 1) {\n          var list = res.data;\n          var arr = [];\n          list.forEach(function (item, index) {\n            var a = JSON.parse(Utils.decrypt(item.data));\n            a.id = item.id;\n            a.R0 = _this2.unescapeF(a.R0);\n            arr.push(a);\n          });\n          _this2.ruleList = arr;\n          _this2.curPage = {\n            page: res.pageIndex,\n            size: res.pageMaxPage\n          };\n          _this2.step = 1;\n        }\n      }, {\n        hasToken: true\n      });\n    }\n  }),\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    //在组件创建之前调用（放置页面加载时请求的Ajax）\n    _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //执行异步函数\n              next(function (vm) {\n                vm.getRuleList();\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    //路由离开前断开\n    this.$sock.close();\n    next();\n  }\n};",{"version":3,"sources":["C:\\Users\\pxy\\Downloads\\test\\lhds\\src\\mixins\\ruleData.js"],"names":["upSvg","Utils","mapActions","ruleData","data","transition","loading","upIcon","editType","step","target","options","duration","offset","easing","curPage","page","size","currentRule","showAddRule","ruleList","watch","wssData","handler","nV","oV","getMessage","deep","computed","$store","state","collocationList","methods","changeTime","time","$utils","timestampToTime","Number","newRule","result","code","json","JSON","stringify","$sock","websocketsend","delRule","id","index","$xyDialog","title","content","onOk","changeLay","lookState","$ax","getAjaxData","res","msg","errorText","type","text","changeSnack","initWebSocket","sessionStorage","removeItem","splice","hasToken","hideRule","getRuleList","editRule","item","inputShow","number","$vuetify","goTo","unescapeF","str","unescape","replace","pageSize","pageIndex","list","arr","forEach","a","parse","decrypt","R0","push","pageMaxPage","beforeRouteEnter","to","from","next","vm","beforeRouteLeave","close"],"mappings":"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","sourcesContent":["import upSvg from '@/img/up.svg'\r\n\timport Utils from '@/plugins/cryAes.js'\r\n\timport {\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\r\n\texport const ruleData = {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttransition: 'fade-transition',\r\n\r\n\t\t\t\tloading: true, //控制骨架屏 true表示显示\r\n\r\n\t\t\t\tupIcon: upSvg,\r\n\r\n\t\t\t\teditType: false, //新增\r\n\r\n\t\t\t\tstep: 1,\r\n\r\n\t\t\t\ttarget: '#vRow',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\toffset: 0,\r\n\t\t\t\t\teasing: 'easeInOutCubic'\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcurPage: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tsize: 0\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcurrentRule: {}, //当前的规则\r\n\r\n\t\t\t\tshowAddRule: false,\r\n\r\n\t\t\t\truleList: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\twssData: {\r\n\t\t\t\thandler(nV, oV) {\r\n\t\t\t\t\tthis.getMessage();\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\twssData() { //wss传递的消息\r\n\t\t\t\treturn this.$store.state.collocationList;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t...mapActions(['changeLay', 'changeSnack']),\r\n\r\n\t\t\tchangeTime(time) {\r\n\t\t\t\treturn this.$utils.timestampToTime(Number(time));\r\n\t\t\t},\r\n\r\n\t\t\tnewRule() {\r\n\t\t\t\tthis.showAddRule = true;\r\n\t\t\t\tthis.editType = false;\r\n\t\t\t},\r\n\r\n\t\t\tgetMessage() { //wss传递的消息\r\n\t\t\t\tlet result = this.wssData;\r\n\t\t\t\tswitch (result.code) {\r\n\t\t\t\t\tcase 20013: //客户端在线\r\n\t\t\t\t\t\tlet json = JSON.stringify({\r\n\t\t\t\t\t\t\tcode: 1006\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.$sock.websocketsend(json);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tdelRule(id, index) { //删除规则\r\n\t\t\t\tthis.$xyDialog({\r\n\t\t\t\t\ttitle:'删除规则',\r\n\t\t\t\t    content: '确定删除吗? 该操作不可撤销',\r\n\t\t\t\t    onOk: () => {\r\n\t\t\t\t\t\tthis.changeLay(true);\r\n\r\n\t\t\t\t\t\tlet state = this.$sock.lookState();\r\n\r\n\t\t\t\t\t\t$ax.getAjaxData('/EasWebUser/delRule', {\r\n\t\t\t\t\t\t\tid: id\r\n\t\t\t\t\t\t}, (res) => {\r\n\t\t\t\t\t\t\tthis.changeLay(false);\r\n\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\t\t\t\tstate: true,\r\n\t\t\t\t\t\t\t\t\terrorText: {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\ttext: '删除成功'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.changeSnack(msg);\r\n\r\n\t\t\t\t\t\t\t\tlet json = JSON.stringify({\r\n\t\t\t\t\t\t\t\t\tcode: 1006\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tstate == -1 ? this.$sock.initWebSocket() : this.$sock.websocketsend(json);\r\n\r\n\t\t\t\t\t\t\t\tsessionStorage.removeItem('collocation'); //清空缓存里的rule/api\r\n\r\n\t\t\t\t\t\t\t\tthis.ruleList.splice(index, 1);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\thasToken: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t     }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\thideRule() { //隐藏规则输入框\r\n\t\t\t\tthis.showAddRule = false;\r\n\t\t\t\tthis.getRuleList();\r\n\t\t\t},\r\n\r\n\t\t\teditRule(item) { //编辑规则\r\n\t\t\t\tthis.showAddRule = true;\r\n\r\n\t\t\t\tthis.editType = true;\r\n\r\n\t\t\t\tthis.currentRule = item;\r\n\t\t\t},\r\n\r\n\t\t\tinputShow(number) {\r\n\t\t\t\tthis.curPage.page = number;\r\n\t\t\t\tthis.$vuetify.goTo(this.target, this.options); //平滑滚动到表头\r\n\t\t\t\tthis.getRuleList();\r\n\t\t\t},\r\n\r\n\t\t\tunescapeF(str) { //unicode=>文字\r\n\t\t\t\treturn unescape(str.replace(/\\\\/g, \"%\"))\r\n\t\t\t},\r\n\r\n\t\t\tgetRuleList() { //规则列表\r\n\t\t\t\tthis.loading = true;\r\n\r\n\t\t\t\t$ax.getAjaxData('/EasWebUser/getRule', {\r\n\t\t\t\t\tcode: this.code,\r\n\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\tpageIndex: this.curPage.page ? this.curPage.page : 0\r\n\t\t\t\t}, (res) => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\tlet list = res.data;\r\n\t\t\t\t\t\tlet arr = [];\r\n\r\n\t\t\t\t\t\tlist.forEach((item, index) => {\r\n\t\t\t\t\t\t\tlet a = JSON.parse(Utils.decrypt(item.data));\r\n\r\n\t\t\t\t\t\t\ta.id = item.id;\r\n\r\n\t\t\t\t\t\t\ta.R0 = this.unescapeF(a.R0);\r\n\r\n\t\t\t\t\t\t\tarr.push(a);\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.ruleList = arr;\r\n\t\t\t\t\t\tthis.curPage = {\r\n\t\t\t\t\t\t\tpage: res.pageIndex,\r\n\t\t\t\t\t\t\tsize: res.pageMaxPage\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.step = 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t}, {\r\n\t\t\t\t\thasToken: true\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeRouteEnter(to, from, next) { //在组件创建之前调用（放置页面加载时请求的Ajax）\r\n\r\n\t\t\t(async () => { //执行异步函数\r\n\r\n\t\t\t\tnext(vm => {\r\n\t\t\t\t\tvm.getRuleList();\r\n\t\t\t\t});\r\n\r\n\t\t\t})();\r\n\r\n\t\t},\r\n\t\tbeforeRouteLeave(to, from, next) { //路由离开前断开\r\n\t\t\tthis.$sock.close();\r\n\r\n\t\t\tnext();\r\n\t\t},\r\n\t}\r\n"]}]}